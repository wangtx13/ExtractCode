org jhotdraw app import awt * import org jhotdraw beans * import org jhotdraw util * import util * import util prefs * import javax swing * import * application bean implements application { private linked list projects = new linked list private collection unmodifiable documents private enabled = resource bundle util labels private application model model private linked list< file> recent files = new linked list private max recent files count = 10 private preferences prefs application { } init { prefs = preferences user node for get model == ? get get model get count = prefs get recent count 0 for i=0 < count i++ { path = prefs get recent +i if path != { recent files add new path } } if model != { model init application this } } start { project = create project add show } project create project { project = basic create project init if get model != { get model init project this } init project actions } set model application model new value { application model old value = model model = new value fire property change model old value new value } application model get model { model } project basic create project { model create project } get { model get } get { model get } get copyright { model get copyright } init project actions project stop { for project new linked list< project> projects { dispose } exit 0 } remove project { hide old count = projects size projects remove set application fire property change project count old count projects size } add project { if get application != this { old count = projects size projects add set application this fire property change project count old count projects size } } dispose project { remove dispose } collection< project> projects { if unmodifiable documents == { unmodifiable documents = collections unmodifiable collection projects } unmodifiable documents } enabled { enabled } set enabled new value { old value = enabled enabled = new value fire property change enabled old value new value } container create container { new frame } launch args { configure args swing utilities later new runnable { run { init start } } } init labels { labels = resource bundle util get bundle org jhotdraw app labels } configure args { } util list< file> recent files { collections unmodifiable list recent files } clear recent files { util list< file> old value = util list< file> recent files clone recent files clear prefs put recent count recent files size fire property change recent files collections unmodifiable list old value collections unmodifiable list recent files } add recent { util list< file> old value = util list< file> recent files clone if recent files contains { recent files remove } recent files add first if recent files size > max recent files count { recent files remove last } prefs put recent count recent files size i=0 for recent files { prefs put recent +i get path i++ } fire property change recent files old value 0 fire property change recent files collections unmodifiable list old value collections unmodifiable list recent files } } 