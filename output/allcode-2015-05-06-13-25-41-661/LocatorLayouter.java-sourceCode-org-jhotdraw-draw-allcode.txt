org jhotdraw draw import org jhotdraw geom dimension2 import org jhotdraw util * import awt * import awt geom * import util * locator layouter implements layouter { attribute key< locator> LAYOUT_LOCATOR = new attribute key< locator> layout locator locator layouter { } rectangle2 calculate layout composite figure composite figure point2 anchor point2 { rectangle2 bounds = for figure child composite figure get children { locator locator = get locator child rectangle2 if locator == { = child get bounds } else { point2 = locator locate composite figure dimension2 = child get preferred size = new rectangle2 width height } if ! empty { if bounds == { bounds = } else { bounds add } } } bounds == ? new rectangle2 bounds } rectangle2 layout composite figure composite figure point2 anchor point2 { rectangle2 bounds = for figure child composite figure get children { locator locator = get locator child rectangle2 if locator == { = child get bounds } else { point2 = locator locate composite figure child dimension2 = child get preferred size = new rectangle2 width height } child will change child basic set bounds new point2 get min get min new point2 get max get max child changed if ! empty { if bounds == { bounds = } else { bounds add } } } bounds == ? new rectangle2 bounds } private locator get locator figure { locator get attribute LAYOUT_LOCATOR } } 