org jhotdraw app action import org jhotdraw util * import awt event * import javax swing * import util * import beans * import awt * import org jhotdraw app default application toggle palette action action { private window palette private default application app private window listener window handler toggle palette action default application app window palette label { super label this app = app window handler = new window adapter { window closing window event evt { put value actions SELECTED_KEY } } set palette palette put value actions SELECTED_KEY } put value key new value { super put value key new value if key == actions SELECTED_KEY { if palette != { = new value if { app add palette palette palette set visible } else { app remove palette palette palette set visible } } } } set palette window new value { if palette != { palette remove window listener window handler } palette = new value if palette != { palette add window listener window handler if get value actions SELECTED_KEY == { app add palette palette palette set visible } else { app remove palette palette palette set visible } } } action performed action event { if palette != { put value actions SELECTED_KEY ! palette visible } } } 