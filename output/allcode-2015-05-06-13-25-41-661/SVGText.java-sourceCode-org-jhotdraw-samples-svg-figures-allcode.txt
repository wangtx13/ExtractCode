org jhotdraw samples svg figures import awt * import awt font * import awt geom * import * import org jhotdraw draw * import org jhotdraw geom geom import org jhotdraw samples svg * import org jhotdraw xml * import org jhotdraw draw attribute keys * text text figure implements figure { enum text anchor { mid } attribute key< text anchor> TEXT_ANCHOR = new attribute key< text anchor> text anchor text anchor text { util set defaults this } @ draw stroke graphics2 { if get text != || editable { rectangle2 bounds = get bounds text layout layout = get text layout affine transform tx = new affine transform tx translate origin origin + layout get ascent shape outline = layout get outline tx draw outline } } @ draw fill graphics2 { if get text != || editable { text layout layout = get text layout layout draw float origin float origin + layout get ascent } } @ draw text awt graphics2 { } @ write dom output out { out add attribute origin out add attribute origin out add text get text } write attributes dom output out { util write attributes this out } @ read dom input { origin = util get dimension origin = util get dimension set text get text read attributes affine transform tx = util get transform transform basic transform tx rectangle2 = get bounds switch TEXT_ANCHOR get this { case break case mid origin = width / 2d break case origin = width break } origin = FONT_SIZE get this } read attributes dom input { util read attributes this } color get text color { FILL_COLOR get this } color get fill color { color white } empty { get text == || get text length == 0 } } 