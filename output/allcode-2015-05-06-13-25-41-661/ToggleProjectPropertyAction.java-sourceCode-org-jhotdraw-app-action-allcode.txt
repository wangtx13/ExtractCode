org jhotdraw app action import awt event * import beans * import org jhotdraw app application import org jhotdraw app project toggle project property action project action { private property private private selected property value private deselected property value private setter private getter private property change listener project listener = new property change listener { property change property change event evt { if evt get property == property { update selected state } } } toggle project property action application app property { this app property } toggle project property action application app property property selected property value deselected property value { super app this property = property this = new { property } this selected property value = selected property value this deselected property value = deselected property value setter = set + character to upper case property char 0 + property substring 1 getter = property == || property == ? get + character to upper case property char 0 + property substring 1 update selected state } action performed action event evt { project = get current project value = get current value new value = value == selected property value || value != selected property value != value equals selected property value ? deselected property value selected property value try { get get setter new {new value} } catch throwable { internal = new internal no +setter name+ +p init cause } } private get current value { project = get current project if != { try { get get getter } catch throwable { internal = new internal no +getter name+ +p init cause } } } install project listeners project { super install project listeners add property change listener project listener update selected state } uninstall project listeners project { super uninstall project listeners remove property change listener project listener } private update selected state { selected = project = get current project if != { try { value = get get getter selected = value == selected property value || value != selected property value != value equals selected property value } catch throwable { internal = new internal no +getter name+ +p init cause } } put value actions SELECTED_KEY selected } } 