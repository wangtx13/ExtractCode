org jhotdraw samples svg action import org jhotdraw draw * import org jhotdraw draw action * import org jhotdraw samples svg figures * import org jhotdraw undo * import org jhotdraw util * import util * import javax swing * import javax swing undo * split action ungroup action { = selection split split action drawing editor editor { super editor new path labels = resource bundle util get bundle org jhotdraw samples svg labels locale get default labels configure action this } can ungroup { if super can ungroup { composite figure get view get selected figures iterator next get child count > 1 } } @ collection< figure> ungroup figures drawing view view composite figure group { linked list< figure> figures = new linked list< figure> group get children view clear selection group basic remove all children linked list< figure> paths = new linked list< figure> for figure figures { path path = new path path remove all children for map entry< attribute key object> entry group get attributes entry set { path basic set attribute entry get key entry get value } path add view get drawing basic add path paths add path } view get drawing remove group view add to selection paths figures } @ group figures drawing view view composite figure group collection< figure> figures { collection< figure> sorted = view get drawing sort figures view get drawing basic remove all figures view clear selection view get drawing add group group will change path group remove all children for map entry< attribute key object> entry figures iterator next get attributes entry set { group basic set attribute entry get key entry get value } for figure sorted { path path = path for figure child path get children { group basic add child } } group changed view add to selection group } } 