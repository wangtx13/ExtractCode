net n3 nanoxml import stream import writer xml { private msg private systemid private line nr private encapsulated xml msg { this 1 msg } xml { this 1 nested } xml systemid line nr { this systemid line nr nested } xml systemid line nr msg { this systemid line nr msg } xml systemid line nr msg report params { super xml build message systemid line nr msg report params this systemid = systemid this line nr = line nr this encapsulated = this msg = xml build message systemid line nr msg report params } private build message systemid line nr msg report params { = msg if report params { if systemid != { += systemid=' + systemid + ' } if line nr >= 0 { += line= + line nr } if != { += + } } } finalize throwable { this systemid = this encapsulated = super finalize } get systemid { this systemid } get line nr { this line nr } get { this encapsulated } stack trace writer writer { super stack trace writer if this encapsulated != { writer *** nested this encapsulated stack trace writer } } stack trace stream stream { super stack trace stream if this encapsulated != { stream *** nested this encapsulated stack trace stream } } stack trace { super stack trace if this encapsulated != { *** nested this encapsulated stack trace } } to { this msg } } 