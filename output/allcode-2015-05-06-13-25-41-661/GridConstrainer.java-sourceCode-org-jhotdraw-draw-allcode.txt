org jhotdraw draw import awt * import awt geom * grid constrainer implements constrainer { private width height private color minor color = new color 0xebebeb private color major color = new color 0xcacaca grid constrainer width height { if width <= 0 || height <= 0 new illegal argument width height <= 0 this width = width this height = height } get width { width } get height { height } point2 constrain point point2 { = math round / width * width = math round / height * height } to { super to + +width+ +height+ } visible { width > 1 height > 1 } draw graphics2 drawing view view { if visible { affine transform = view get drawing to view transform rectangle view bounds = get clip bounds rectangle2 bounds = view view to drawing view bounds point2 origin = constrain point new point2 bounds bounds point2 point = new point2 point2 view point = new point2 if width * view get scale factor > 1 { set color minor color for i= origin / width = origin + bounds width / width + 1 <= i++ { set color % 5 == 0 ? major color minor color point = width * transform point view point draw line view point view bounds view point view bounds + view bounds height } } if height * view get scale factor > 1 { set color minor color for i= origin / height = origin + bounds height / height + 1 <= i++ { set color % 5 == 0 ? major color minor color point = height * transform point view point draw line view bounds view point view bounds + view bounds width view point } } } } } 