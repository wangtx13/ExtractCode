org jhotdraw app action import awt * import awt event * import beans * import javax swing * import javax swing event * import org jhotdraw app Application import org jhotdraw app Project Abstract Project Action Abstract Action { private Application app private Property Change Listener application Listener = new Property Change Listener { property Change Property Change Event evt { if evt get Property Name == current Project { update Project Project evt get Old Value Project evt get New Value } } } private Property Change Listener project Listener = new Property Change Listener { property Change Property Change Event evt { if evt get Property Name == enabled { update Enabled Boolean evt get Old Value Boolean evt get New Value } } } Abstract Project Action Application app { this app = app if app != { app add Property Change Listener application Listener update Project app get Current Project } } update Project Project old Value Project new Value { if old Value != { uninstall Project Listeners old Value } if new Value != { install Project Listeners new Value } fire Property Change project old Value new Value update Enabled old Value != old Value Enabled new Value != new Value Enabled } install Project Listeners Project { add Property Change Listener project Listener } uninstall Project Listeners Project { remove Property Change Listener project Listener } update Enabled old Value new Value { set Enabled super Enabled fire Property Change project Enabled old Value new Value } Application get Application { app } Project get Current Project { app get Current Project } @ Override Enabled { get Current Project != get Current Project Enabled || super Enabled } @ Override set Enabled new Value { old Value = this enabled this enabled = new Value proj Is Enabled = get Current Project != get Current Project Enabled fire Property Change enabled Boolean value Of old Value proj Is Enabled Boolean value Of new Value proj Is Enabled } } 