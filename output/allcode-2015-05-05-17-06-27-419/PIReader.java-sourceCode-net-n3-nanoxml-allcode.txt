net n3 nanoxml import Reader import I O Exception P I Reader Reader { private I Xml Reader reader private End Of Data P I Reader I Xml Reader reader { this reader = reader this End Of Data = } finalize Throwable { this reader = super finalize } read char buffer offset size I O Exception { if this End Of Data { -1 } chars Read = 0 if offset + size > buffer length { size = buffer length - offset } while chars Read < size { char ch = this reader read if ch == '?' { char ch2 = this reader read if ch2 == '>' { this End Of Data = break } this reader unread ch2 } buffer chars Read = ch chars Read++ } if chars Read == 0 { chars Read = -1 } chars Read } close I O Exception { while ! this End Of Data { char ch = this reader read if ch == '?' { char ch2 = this reader read if ch2 == '>' { this End Of Data = } } } } } 