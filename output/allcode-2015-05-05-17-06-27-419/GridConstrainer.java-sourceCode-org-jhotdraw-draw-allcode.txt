org jhotdraw draw import awt * import awt geom * Grid Constrainer implements Constrainer { private width height private Color minor Color = new Color 0xebebeb private Color major Color = new Color 0xcacaca Grid Constrainer width height { if width <= 0 || height <= 0 new Illegal Argument Exception Width or height <= 0 this width = width this height = height } get Width { width } get Height { height } Point2 constrain Point Point2 { = Math round / width * width = Math round / height * height } String to String { super to String + +width+ +height+ } Visible { width > 1 height > 1 } draw Graphics2 Drawing View view { if Visible { Affine Transform = view get Drawing To View Transform Rectangle view Bounds = get Clip Bounds Rectangle2 bounds = view view To Drawing view Bounds Point2 origin = constrain Point new Point2 bounds bounds Point2 point = new Point2 Point2 view Point = new Point2 if width * view get Scale Factor > 1 { set Color minor Color for i= origin / width = origin + bounds width / width + 1 <= i++ { set Color % 5 == 0 ? major Color minor Color point = width * transform point view Point draw Line view Point view Bounds view Point view Bounds + view Bounds height } } if height * view get Scale Factor > 1 { set Color minor Color for i= origin / height = origin + bounds height / height + 1 <= i++ { set Color % 5 == 0 ? major Color minor Color point = height * transform point view Point draw Line view Bounds view Point view Bounds + view Bounds width view Point } } } } } 