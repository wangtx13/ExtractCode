org jhotdraw app action import awt event * import beans * import org jhotdraw app Application import org jhotdraw app Project Toggle Project Property Action Abstract Project Action { private String property Name private Class Class private Object selected Property Value private Object deselected Property Value private String setter Name private String getter Name private Property Change Listener project Listener = new Property Change Listener { property Change Property Change Event evt { if evt get Property Name == property Name { update Selected State } } } Toggle Project Property Action Application app String property Name { this app property Name Boolean T Y P E } Toggle Project Property Action Application app String property Name Class property Class Object selected Property Value Object deselected Property Value { super app this property Name = property Name this Class = new Class { property Class } this selected Property Value = selected Property Value this deselected Property Value = deselected Property Value setter Name = set + Character to Upper Case property Name char At 0 + property Name substring 1 getter Name = property Class == Boolean T Y P E || property Class == Boolean ? get + Character to Upper Case property Name char At 0 + property Name substring 1 update Selected State } action Performed Action Event evt { Project = get Current Project Object value = get Current Value Object new Value = value == selected Property Value || value != selected Property Value != value equals selected Property Value ? deselected Property Value selected Property Value try { get Class get Method setter Name Class invoke new Object {new Value} } catch Throwable { Internal Error error = new Internal Error No +setter Name+ +p error init Cause error } } private Object get Current Value { Project = get Current Project if != { try { get Class get Method getter Name Class invoke } catch Throwable { Internal Error error = new Internal Error No +getter Name+ +p error init Cause error } } } install Project Listeners Project { super install Project Listeners add Property Change Listener project Listener update Selected State } uninstall Project Listeners Project { super uninstall Project Listeners remove Property Change Listener project Listener } private update Selected State { Selected = Project = get Current Project if != { try { Object value = get Class get Method getter Name Class invoke Selected = value == selected Property Value || value != selected Property Value != value equals selected Property Value } catch Throwable { Internal Error error = new Internal Error No +getter Name+ +p error init Cause error } } put Value Actions SELECTED_KEY Selected } } 