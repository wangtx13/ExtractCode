org jhotdraw draw import org jhotdraw util * import awt * import awt geom * import org jhotdraw draw Attribute Keys * import org jhotdraw geom * Chop Round Rect Connector Chop Box Connector { Chop Round Rect Connector { } Chop Round Rect Connector Figure owner { super owner } Point2 chop Figure target Point2 from { target = get Connector Target target Round Rectangle Figure rrf = Round Rectangle Figure target Rectangle2 outer = rrf get Bounds grow switch STROKE_PLACEMENT get target { case C E N T E R default grow = Attribute Keys get Stroke Total Width target / 2d break case O U T Sid E grow = Attribute Keys get Stroke Total Width target break case I N Sid E grow = 0 break } Geom grow outer grow grow Rectangle2 inner = Rectangle2 outer clone gw = - rrf get Arc Width + grow * 2 / 2 gh = - rrf get Arc Height + grow *2 / 2 inner -= gw inner -= gh inner width += gw * 2 inner height += gh * 2 angle = Geom point To Angle outer from Point2 = Geom angle To Point outer Geom point To Angle outer from if == outer || == outer + outer width { = Math min Math max inner inner + inner height } else { = Math min Math max inner inner + inner width } } } 