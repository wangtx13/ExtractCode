org jhotdraw samples svg action import org jhotdraw draw * import org jhotdraw draw action * import org jhotdraw samples svg figures * import org jhotdraw undo * import org jhotdraw util * import util * import javax swing * import javax swing undo * Combine Action Group Action { String = selection Combine Combine Action Drawing Editor editor { super editor new S V G Path labels = Resource Bundle Util get L A F Bundle org jhotdraw samples svg Labels Locale get Default labels configure Action this } @ Override can Group { can Combine = get View get Selection Count > 1 if can Combine { for Figure get View get Selected Figures { if ! instanceof S V G Path { can Combine = break } } } can Combine } Collection< Figure> ungroup Figures Drawing View view Composite Figure group { Linked List< Figure> figures = new Linked List< Figure> group get Children view clear Selection group basic Remove All Children Linked List< Figure> paths = new Linked List< Figure> for Figure figures { S V G Path path = new S V G Path path remove All Children for Map Entry< Attribute Key Object> entry group get Attributes entry Set { path basic Set Attribute entry get Key entry get Value } path add view get Drawing basic Add path paths add path } view get Drawing remove group view add To Selection paths figures } group Figures Drawing View view Composite Figure group Collection< Figure> figures { Collection< Figure> sorted = view get Drawing sort figures view get Drawing basic Remove All figures view clear Selection view get Drawing add group group will Change S V G Path group remove All Children for Map Entry< Attribute Key Object> entry figures iterator next get Attributes entry Set { group basic Set Attribute entry get Key entry get Value } for Figure sorted { S V G Path path = S V G Path for Figure child path get Children { group basic Add child } } group changed view add To Selection group } } 