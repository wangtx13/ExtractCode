org jhotdraw draw import org jhotdraw geom Dimension2 import org jhotdraw util * import awt * import awt geom * import util * Locator Layouter implements Layouter { Attribute Key< Locator> LAYOUT_LOCATOR = new Attribute Key< Locator> layout Locator Locator Layouter { } Rectangle2 calculate Layout Composite Figure composite Figure Point2 anchor Point2 { Rectangle2 bounds = for Figure child composite Figure get Children { Locator locator = get Locator child Rectangle2 if locator == { = child get Bounds } else { Point2 = locator locate composite Figure Dimension2 = child get Preferred Size = new Rectangle2 width height } if ! Empty { if bounds == { bounds = } else { bounds add } } } bounds == ? new Rectangle2 bounds } Rectangle2 layout Composite Figure composite Figure Point2 anchor Point2 { Rectangle2 bounds = for Figure child composite Figure get Children { Locator locator = get Locator child Rectangle2 if locator == { = child get Bounds } else { Point2 = locator locate composite Figure child Dimension2 = child get Preferred Size = new Rectangle2 width height } child will Change child basic Set Bounds new Point2 get Min X get Min Y new Point2 get Max X get Max Y child changed if ! Empty { if bounds == { bounds = } else { bounds add } } } bounds == ? new Rectangle2 bounds } private Locator get Locator Figure { Locator get Attribute LAYOUT_LOCATOR } } 