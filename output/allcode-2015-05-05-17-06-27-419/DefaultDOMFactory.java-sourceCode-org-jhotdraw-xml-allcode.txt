org jhotdraw xml import util * Default Dom Factory implements Dom Factory { private Hash Map< Class String> To Name Map = new Hash Map< Class String> private Hash Map< String Object> To Prototype Map = new Hash Map< String Object> private Hash Map< Class String> enum Class To Name Map = new Hash Map< Class String> private Hash Map< String Class> To Enum Class Map = new Hash Map< String Class> private Hash Map< Enum String> enum To Value Map = new Hash Map< Enum String> private Hash Map< String Set< Enum>> value To Enum Map = new Hash Map< String Set< Enum>> Default Dom Factory { } add Storable Class String Class { To Prototype Map put To Name Map put } add Storable String Dom Storable prototype { To Prototype Map put prototype To Name Map put prototype get Class } add Enum Class String Class { enum Class To Name Map put To Enum Class Map put } add Enum String value Enum { enum To Value Map put value Set< Enum> enums if value To Enum Map contains Key value { enums = value To Enum Map get value } else { enums = new Hash Set< Enum> value To Enum Map put value enums } enums add } Object create String { Object = To Prototype Map get if == { new Illegal Argument Exception Storable not known to factory +name } if instanceof Class { try { Class new Instance } catch Exception { Illegal Argument Exception error = new Illegal Argument Exception Storable not instantiable by factory +name error init Cause error } } else { try { get Class get Method clone Class invoke Object } catch Exception { Illegal Argument Exception error = new Illegal Argument Exception Storable prototype not cloneable by factory Name +name error init Cause error } } } String get Name Dom Storable { String = To Name Map get get Class if == { new Illegal Argument Exception Storable not known to factory Storable +o+ Factory +this get Class } } String get Enum Name Enum { String = enum Class To Name Map get get Class if == { new Illegal Argument Exception Enum not known to factory +e get Class } } String get Enum Value Enum { enum To Value Map contains Key ? enum To Value Map get to String } Enum create Enum String String value { Class enum Class = To Enum Class Map get if enum Class == { new Illegal Argument Exception Enum not known to factory +name } Set< Enum> enums = value To Enum Map get value if enums == { Enum value Of enum Class value } for Enum enums { if get Class == enum Class { } } new Illegal Argument Exception Enum value not known to factory +value } } 