org jhotdraw draw import org jhotdraw util * import org jhotdraw undo * import awt * import awt event * import awt geom * import util * import org jhotdraw geom * Rotate Handle Abstract Handle { private Point location private Object restore Data private Affine Transform transform private Point2 center private start Theta private start Length Rotate Handle Figure owner { super owner } Combinable With Handle { } draw Graphics2 { draw Diamond Color green Color black } Rectangle basic Get Bounds { Rectangle = new Rectangle get Location grow get Handlesize / 2 get Handlesize / 2 } Point get Location { if location == { view drawing To View get Origin } location } private Point2 get Origin { Rectangle2 bounds = get Owner get Bounds new Point2 bounds get Center X bounds - get Handlesize } track Start Point anchor modifiers Ex { location = new Point anchor anchor restore Data = get Owner get Restore Data Rectangle2 bounds = get Owner get Bounds transform = new Affine Transform center = new Point2 bounds get Center X bounds get Center Y Point2 anchor Point = view view To Drawing anchor start Theta = Geom angle center center anchor Point anchor Point start Length = Geom length center center anchor Point anchor Point } track Step Point anchor Point modifiers Ex { location = new Point Point2 Point = view view To Drawing step Theta = Geom angle center center Point Point step Length = Geom length center center Point Point transform set To Identity transform translate center center transform rotate step Theta - start Theta transform translate -center -center get Owner will Change get Owner restore To restore Data get Owner basic Transform transform get Owner changed } track End Point anchor Point modifiers Ex { view get Drawing fire Undoable Edit Happened new Restore Data Edit get Owner restore Data location = } } 