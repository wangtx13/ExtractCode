org jhotdraw draw import util * import awt * import awt geom * import org jhotdraw geom * import org jhotdraw xml Dom Input import org jhotdraw xml Dom Output import org jhotdraw xml Dom Storable Elbow Liner implements Liner Dom Storable { Elbow Liner { } Collection< Handle> create Handles Bezier Path path { } lineout Connection Figure figure { Bezier Path path = Line Connection Figure figure get Bezier Path Connector start = figure get Start Connector Connector = figure get End Connector if start == || == || path == { } Point2 = start find Start figure Point2 = find End figure path clear path add new Bezier Path Node if == || == { path add new Bezier Path Node } else { Rectangle2 sb = start get Bounds sb += 5d sb += 5d sb width -= 10d sb height -= 10d Rectangle2 eb = get Bounds eb += 5d eb += 5d eb width -= 10d eb height -= 10d soutcode = sb outcode if soutcode == 0 { soutcode = Geom outcode sb eb } eoutcode = eb outcode if eoutcode == 0 { eoutcode = Geom outcode eb sb } if soutcode Geom OUT_TOP | Geom OUT_BOTTOM != 0 eoutcode Geom OUT_TOP | Geom OUT_BOTTOM != 0 { path add new Bezier Path Node + /2 path add new Bezier Path Node + /2 } else if soutcode Geom OUT_LEFT | Geom OUT_RIGHT != 0 eoutcode Geom OUT_LEFT | Geom OUT_RIGHT != 0 { path add new Bezier Path Node + /2 path add new Bezier Path Node + /2 } path add new Bezier Path Node } path invalidate Path } read Dom Input { } write Dom Output out { } Liner clone { try { Liner super clone } catch Clone Not Supported Exception { Internal Error error = new Internal Error get Message error init Cause error } } } 