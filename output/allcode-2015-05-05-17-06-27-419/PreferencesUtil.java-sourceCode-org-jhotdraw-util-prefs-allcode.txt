org jhotdraw util prefs import awt * import awt event * import util prefs * import javax swing * Preferences Util { private Preferences Util { } install Frame Prefs Handler Preferences prefs String Window window { Graphics Configuration conf = window get Graphics Configuration Rectangle screen Bounds = conf get Bounds Insets screen Insets = window get Toolkit get Screen Insets conf screen Bounds += screen Insets left screen Bounds += screen Insets top screen Bounds width -= screen Insets left + screen Insets right screen Bounds height -= screen Insets top + screen Insets bottom Dimension preferred Size = window get Preferred Size Dimension min Size = window get Minimum Size Rectangle bounds = new Rectangle prefs get Int name+ 0 prefs get Int name+ 0 Math max min Size width prefs get Int name+ width preferred Size width Math max min Size height prefs get Int name+ height preferred Size height if ! screen Bounds contains bounds { bounds = screen Bounds + screen Bounds width - bounds width / 2 bounds = screen Bounds + screen Bounds height - bounds height / 2 Rectangle intersect screen Bounds bounds bounds } window set Bounds bounds window add Component Listener new Component Adapter { component Moved Component Event evt { prefs put Int name+ evt get Component get X prefs put Int name+ evt get Component get Y } component Resized Component Event evt { prefs put Int name+ width evt get Component get Width prefs put Int name+ height evt get Component get Height } } } install Palette Prefs Handler Preferences prefs String Window window { install Palette Prefs Handler prefs window 0 } install Palette Prefs Handler Preferences prefs String Window window { Graphics Configuration conf = window get Graphics Configuration Rectangle screen Bounds = conf get Bounds Insets screen Insets = window get Toolkit get Screen Insets conf screen Bounds += screen Insets left screen Bounds += screen Insets top screen Bounds width -= screen Insets left + screen Insets right screen Bounds height -= screen Insets top + screen Insets bottom Dimension preferred Size = window get Preferred Size Rectangle bounds = new Rectangle prefs get Int name+ + screen Bounds prefs get Int name+ 0 + screen Bounds preferred Size width preferred Size height if ! screen Bounds contains bounds { bounds = screen Bounds bounds = screen Bounds } window set Bounds bounds window add Component Listener new Component Adapter { component Moved Component Event evt { prefs put Int name+ evt get Component get X prefs put Int name+ evt get Component get Y } } } install Internal Frame Prefs Handler Preferences prefs String J Internal Frame window J Desktop Pane desktop { Rectangle screen Bounds = desktop get Bounds screen Bounds set Location 0 0 Insets screen Insets = desktop get Insets screen Bounds += screen Insets left screen Bounds += screen Insets top screen Bounds width -= screen Insets left + screen Insets right screen Bounds height -= screen Insets top + screen Insets bottom Dimension preferred Size = window get Preferred Size Dimension min Size = window get Minimum Size Rectangle bounds = new Rectangle prefs get Int name+ 0 prefs get Int name+ 0 Math max min Size width prefs get Int name+ width preferred Size width Math max min Size height prefs get Int name+ height preferred Size height if ! screen Bounds contains bounds { bounds = screen Bounds + screen Bounds width - bounds width / 2 bounds = screen Bounds + screen Bounds height - bounds height / 2 Rectangle intersect screen Bounds bounds bounds } window set Bounds bounds window add Component Listener new Component Adapter { component Moved Component Event evt { prefs put Int name+ evt get Component get X prefs put Int name+ evt get Component get Y } component Resized Component Event evt { prefs put Int name+ width evt get Component get Width prefs put Int name+ height evt get Component get Height } } } install Tool Bar Prefs Handler Preferences prefs String J Tool Bar toolbar { new Tool Bar Prefs Handler toolbar prefs } } 