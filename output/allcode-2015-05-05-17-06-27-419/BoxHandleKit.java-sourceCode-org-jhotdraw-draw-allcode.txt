org jhotdraw draw import util * import awt * import awt geom * import awt event * Box Handle Kit { Box Handle Kit { } add Lead Handles Figure Collection< Handle> handles { handles add south East handles add south West handles add north East handles add north West } add Edge Handles Figure Collection< Handle> handles { handles add south handles add north handles add east handles add west } add Box Handles Figure Collection< Handle> handles { add Lead Handles handles add Edge Handles handles } Handle south Figure owner { new South Handle owner } Handle south East Figure owner { new South East Handle owner } Handle south West Figure owner { new South West Handle owner } Handle north Figure owner { new North Handle owner } Handle north East Figure owner { new North East Handle owner } Handle north West Figure owner { new North West Handle owner } Handle east Figure owner { new East Handle owner } Handle west Figure owner { new West Handle owner } private Resize Handle Locator Handle { private dx dy Object geometry Resize Handle Figure owner Locator { super owner } track Start Point anchor modifiers Ex { geometry = get Owner get Restore Data Point location = get Location dx = -anchor + location dy = -anchor + location } track Step Point anchor Point modifiers Ex { Point2 = view view To Drawing new Point + dx + dy view get Constrainer constrain Point track Step Normalized } track End Point anchor Point modifiers Ex { fire Undoable Edit Happened new Geometry Edit get Owner geometry get Owner get Restore Data } track Step Normalized Point2 { } set Bounds Point2 anchor Point2 { Figure = get Owner will Change Rectangle2 old Bounds = get Bounds Rectangle2 new Bounds = new Rectangle2 Math min anchor Math min anchor Math anchor - Math anchor - sx = new Bounds width / old Bounds width = new Bounds height / old Bounds height Affine Transform tx = new Affine Transform tx translate -old Bounds -old Bounds if ! Na N sx ! Na N sx != 1d || != 1d ! sx < 0 0001 ! < 0 0001 { basic Transform tx tx set To Identity tx scale sx basic Transform tx tx set To Identity } tx translate new Bounds new Bounds basic Transform tx changed } } private North East Handle Resize Handle { North East Handle Figure owner { super owner Relative Locator north East } track Step Normalized Point2 { Rectangle2 = get Owner get Bounds set Bounds new Point2 Math min + height - 1 new Point2 Math max + height } Cursor get Cursor { Cursor get Predefined Cursor Cursor NE_RESIZE_CURSOR } } private East Handle Resize Handle { East Handle Figure owner { super owner Relative Locator east } track Step Normalized Point2 { Rectangle2 = get Owner get Bounds set Bounds new Point2 new Point2 Math max + 1 + height } Cursor get Cursor { Cursor get Predefined Cursor Cursor E_RESIZE_CURSOR } } private North Handle Resize Handle { North Handle Figure owner { super owner Relative Locator north } track Step Normalized Point2 { Rectangle2 = get Owner get Bounds set Bounds new Point2 Math min + height - 1 new Point2 + width + height } Cursor get Cursor { Cursor get Predefined Cursor Cursor N_RESIZE_CURSOR } } private North West Handle Resize Handle { North West Handle Figure owner { super owner Relative Locator north West } track Step Normalized Point2 { Rectangle2 = get Owner get Bounds set Bounds new Point2 Math min + width - 1 Math min + height - 1 new Point2 + width + height } Cursor get Cursor { Cursor get Predefined Cursor Cursor NW_RESIZE_CURSOR } } private South East Handle Resize Handle { South East Handle Figure owner { super owner Relative Locator south East } track Step Normalized Point2 { Rectangle2 = get Owner get Bounds set Bounds new Point2 new Point2 Math max + 1 Math max + 1 } Cursor get Cursor { Cursor get Predefined Cursor Cursor SE_RESIZE_CURSOR } } private South Handle Resize Handle { South Handle Figure owner { super owner Relative Locator south } track Step Normalized Point2 { Rectangle2 = get Owner get Bounds set Bounds new Point2 new Point2 + width Math max + 1 } Cursor get Cursor { Cursor get Predefined Cursor Cursor S_RESIZE_CURSOR } } private South West Handle Resize Handle { South West Handle Figure owner { super owner Relative Locator south West } track Step Normalized Point2 { Rectangle2 = get Owner get Bounds set Bounds new Point2 Math min + width - 1 new Point2 + width Math max + 1 } Cursor get Cursor { Cursor get Predefined Cursor Cursor SW_RESIZE_CURSOR } } private West Handle Resize Handle { West Handle Figure owner { super owner Relative Locator west } track Step Normalized Point2 { Rectangle2 = get Owner get Bounds set Bounds new Point2 Math min + width - 1 new Point2 + width + height } Cursor get Cursor { Cursor get Predefined Cursor Cursor W_RESIZE_CURSOR } } } 