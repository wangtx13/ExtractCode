net n3 nanoxml import Reader import I O Exception C A T A Reader Reader { private I Xml Reader reader private char saved Char private End Of Data C A T A Reader I Xml Reader reader { this reader = reader this saved Char = 0 this End Of Data = } finalize Throwable { this reader = super finalize } read char buffer offset size I O Exception { chars Read = 0 if this End Of Data { -1 } if offset + size > buffer length { size = buffer length - offset } while chars Read < size { char ch = this saved Char if ch == 0 { ch = this reader read } else { this saved Char = 0 } if ch == ' ' { char ch2 = this reader read if ch2 == ' ' { char ch3 = this reader read if ch3 == '>' { this End Of Data = break } this saved Char = ch2 this reader unread ch3 } else { this reader unread ch2 } } buffer chars Read = ch chars Read++ } if chars Read == 0 { chars Read = -1 } chars Read } close I O Exception { while ! this End Of Data { char ch = this saved Char if ch == 0 { ch = this reader read } else { this saved Char = 0 } if ch == ' ' { char ch2 = this reader read if ch2 == ' ' { char ch3 = this reader read if ch3 == '>' { break } this saved Char = ch2 this reader unread ch3 } else { this reader unread ch2 } } } this End Of Data = } } 