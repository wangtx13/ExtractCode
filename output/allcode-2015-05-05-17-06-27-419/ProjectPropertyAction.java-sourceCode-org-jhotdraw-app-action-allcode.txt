org jhotdraw app action import awt event * import beans * import org jhotdraw app Application import org jhotdraw app Project Project Property Action Abstract Project Action { private String property Name private Class Class private Object property Value private String setter Name private String getter Name private Property Change Listener project Listener = new Property Change Listener { property Change Property Change Event evt { if evt get Property Name == property Name { update Selected State } } } Project Property Action Application app String property Name Object property Value { this app property Name property Value get Class property Value } Project Property Action Application app String property Name Class property Class Object property Value { super app this property Name = property Name this Class = new Class { property Class } this property Value = property Value setter Name = set + Character to Upper Case property Name char At 0 + property Name substring 1 getter Name = property Class == Boolean T Y P E || property Class == Boolean ? get + Character to Upper Case property Name char At 0 + property Name substring 1 update Selected State } action Performed Action Event evt { Project = get Current Project try { get Class get Method setter Name Class invoke new Object {property Value} } catch Throwable { Internal Error error = new Internal Error Method invocation failed error init Cause error } } install Project Listeners Project { super install Project Listeners add Property Change Listener project Listener update Selected State } uninstall Project Listeners Project { super uninstall Project Listeners remove Property Change Listener project Listener } private update Selected State { Selected = Project = get Current Project if != { try { Object value = get Class get Method getter Name Class invoke Selected = value == property Value || value != property Value != value equals property Value } catch Throwable { Internal Error error = new Internal Error Method invocation failed error init Cause error } } put Value Actions SELECTED_KEY Selected } } 