org jhotdraw util prefs import awt * import awt event * import util prefs * import javax swing * import javax swing plaf basic * import javax swing event * Tool Bar Prefs Handler implements Component Listener Ancestor Listener { private J Tool Bar toolbar private String prefs Prefix private Preferences prefs private first Time Shown Tool Bar Prefs Handler J Tool Bar toolbar String prefs Prefix Preferences prefs { this toolbar = toolbar this prefs Prefix = prefs Prefix this prefs = prefs String constraint = prefs get prefs Prefix+ constraint Border Layout N O R T H orientation = constraint equals Border Layout N O R T H || constraint equals Border Layout S O U T H ? J Tool Bar H O R I Z O N T A L J Tool Bar V E R T I C A L toolbar set Orientation orientation toolbar get Parent add constraint toolbar toolbar set Visible prefs get Boolean prefs Prefix+ visible toolbar add Component Listener this toolbar add Ancestor Listener this } component Hidden Component Event { prefs put Boolean prefs Prefix+ visible } component Moved Component Event { location Changed } private location Changed { if toolbar get U I instanceof Basic Tool Bar U I { Basic Tool Bar U I ui = Basic Tool Bar U I toolbar get U I floating = ui Floating prefs put Boolean prefs Prefix+ Floating floating if floating { Window window = Swing Utilities get Window Ancestor toolbar prefs put Int prefs Prefix+ floating X window get X prefs put Int prefs Prefix+ floating Y window get Y } else if toolbar get Parent != { = toolbar get X = toolbar get Y Insets insets = toolbar get Parent get Insets String constraint if == insets left == insets top { constraint = toolbar get Orientation == J Tool Bar H O R I Z O N T A L ? Border Layout N O R T H Border Layout W E S T } else { constraint = toolbar get Orientation == J Tool Bar H O R I Z O N T A L ? Border Layout S O U T H Border Layout E A S T } prefs put prefs Prefix+ constraint constraint } } else { if toolbar get Parent != { = toolbar get X = toolbar get Y Insets insets = toolbar get Parent get Insets String constraint if == insets left == insets top { constraint = toolbar get Orientation == J Tool Bar H O R I Z O N T A L ? Border Layout N O R T H Border Layout W E S T } else { constraint = toolbar get Orientation == J Tool Bar H O R I Z O N T A L ? Border Layout S O U T H Border Layout E A S T } prefs put prefs Prefix+ constraint constraint } } } component Resized Component Event { location Changed } component Shown Component Event { prefs put Boolean prefs Prefix+ visible } ancestor Added Ancestor Event event { location Changed } ancestor Moved Ancestor Event event { if toolbar get U I instanceof Basic Tool Bar U I { if Basic Tool Bar U I toolbar get U I Floating { location Changed } } } ancestor Removed Ancestor Event event { if toolbar get U I instanceof Basic Tool Bar U I { if Basic Tool Bar U I toolbar get U I Floating { location Changed } } } } 