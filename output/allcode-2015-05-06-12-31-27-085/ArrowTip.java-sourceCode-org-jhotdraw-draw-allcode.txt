org jhotdraw draw import * import awt * import awt geom * import org jhotdraw util * import org jhotdraw xml DOMInput dom input import org jhotdraw xml DOMOutput dom output import org jhotdraw xml DOMStorable dom storable ArrowTip arrow tip AbstractLineDecoration line decoration implements DOMStorable dom storable { private angle private outerRadius outer radius private innerRadius inner radius ArrowTip arrow tip { this 0 35 12 11 3 } ArrowTip arrow tip angle outerRadius outer radius innerRadius inner radius { this angle outerRadius outer radius innerRadius inner radius } ArrowTip arrow tip angle outerRadius outer radius innerRadius inner radius isFilled filled isStroked stroked isSolid solid { super isFilled filled isStroked stroked isSolid solid this angle = angle this outerRadius outer radius = outerRadius outer radius this innerRadius inner radius = innerRadius inner radius } GeneralPath general path getDecoratorPath get decorator path figure { offset = isStroked stroked ? 1 0 GeneralPath general path path = new GeneralPath general path path moveTo move to float outerRadius outer radius * math sin -angle float offset + outerRadius outer radius * math cos -angle path lineTo line to 0 float offset path lineTo line to float outerRadius outer radius * math sin angle float offset + outerRadius outer radius * math cos angle if innerRadius inner radius != 0 { path lineTo line to 0 float innerRadius inner radius + offset path closePath close path } path } getDecoratorPathRadius get decorator path radius figure { offset = isStroked stroked ? 0 5 -0 1 innerRadius inner radius + offset } read DOMInput dom input { angle = getAttribute get attribute angle 0 35f innerRadius inner radius = getAttribute get attribute innerRadius inner radius 12f outerRadius outer radius = getAttribute get attribute outerRadius outer radius 12f setFilled set filled getAttribute get attribute isFilled filled setStroked set stroked getAttribute get attribute isStroked stroked setSolid set solid getAttribute get attribute isSolid solid } write DOMOutput dom output out { out addAttribute add attribute angle angle out addAttribute add attribute innerRadius inner radius innerRadius inner radius out addAttribute add attribute outerRadius outer radius outerRadius outer radius out addAttribute add attribute isFilled filled isFilled filled out addAttribute add attribute isStroked stroked isStroked stroked out addAttribute add attribute isSolid solid isSolid solid } } 