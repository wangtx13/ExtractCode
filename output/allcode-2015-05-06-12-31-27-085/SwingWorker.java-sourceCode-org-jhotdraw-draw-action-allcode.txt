org jhotdraw draw action import javax swing SwingUtilities swing utilities SwingWorker swing worker { 	private value 	private thread thread 	 	private ThreadVar thread var { 		private thread thread 		ThreadVar 		 thread var thread { thread = } 		synchronized thread get { thread } 		synchronized clear { thread = } 	} 	private ThreadVar thread var threadVar thread var 	 	public SwingWorker swing worker { 		final runnable doFinished finished = new runnable { 		 run { finished } 		} 		Runnable 		 runnable doConstruct construct = new runnable { 			public run { 				try { 					setValue 					set value construct 				} 				finally { 					threadVar 					thread var clear 				} 				SwingUtilities 				 swing utilities invokeLater later doFinished finished 			} 		} 		Thread 		 thread = new thread doConstruct construct SwingWorker swing worker 		threadVar 		thread var = new ThreadVar thread var 	} 	 	public construct 	 	public finished { 	} 	 	public get { 		while { 			Thread 			 thread = threadVar thread var get 			if == { 				return getValue get value 			} 			try { 				t join 			} 			catch InterruptedException interrupted { 				Thread 				 thread currentThread current thread interrupt 				return 			} 		} 	} 	 	protected synchronized getValue get value { 		return value 	} 	 	public interrupt { 		Thread 		 thread = threadVar thread var get 		if != { 			t interrupt 		} 		threadVar 		thread var clear 	} 	 	private synchronized setValue set value { 		value = 	} 	 	public start { 		Thread 		 thread = threadVar thread var get 		if != { 			t start 		} 	} } 