org jhotdraw app action import awt * import awt event * import javax swing * import javax swing text * import beans * import util * import org jhotdraw util * import org jhotdraw app application import org jhotdraw app project RedoAction redo action AbstractProjectAction project action { = redo private ResourceBundleUtil resource bundle util labels = ResourceBundleUtil resource bundle util getLAFBundle get bundle org jhotdraw app labels private PropertyChangeListener property change listener redoActionPropertyListener redo action property listener = new PropertyChangeListener property change listener { propertyChange property change PropertyChangeEvent property change event evt { = evt getPropertyName get property if == AbstractAction action NAME { putValue put value AbstractAction action NAME evt getNewValue get new value } else if == enabled { updateEnabledState update enabled state } } } RedoAction redo action application app { super app labels configureAction configure action this } updateEnabledState update enabled state { isEnabled enabled = action realRedoAction real redo action = getRealRedoAction get real redo action if realRedoAction real redo action != { isEnabled enabled = realRedoAction real redo action isEnabled enabled } setEnabled set enabled isEnabled enabled } @Override @ updateProject update project project oldValue old value project newValue new value { super updateProject update project oldValue old value newValue new value if newValue new value != { putValue put value AbstractAction action NAME newValue new value getAction get action redo getValue get value AbstractAction action NAME updateEnabledState update enabled state } } @Override @ installProjectListeners install project listeners project { super installProjectListeners install project listeners getAction get action redo addPropertyChangeListener add property change listener redoActionPropertyListener redo action property listener } @Override @ uninstallProjectListeners uninstall project listeners project { super uninstallProjectListeners uninstall project listeners getAction get action redo removePropertyChangeListener remove property change listener redoActionPropertyListener redo action property listener } actionPerformed action performed ActionEvent action event { action realRedoAction real redo action = getRealRedoAction get real redo action if realRedoAction real redo action != { realRedoAction real redo action actionPerformed action performed } } private action getRealRedoAction get real redo action { getCurrentProject get current project == ? getCurrentProject get current project getAction get action redo } } 