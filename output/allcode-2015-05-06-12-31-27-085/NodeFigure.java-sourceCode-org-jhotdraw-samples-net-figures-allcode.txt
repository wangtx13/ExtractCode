org jhotdraw samples net figures import awt * import awt geom * import util * import org jhotdraw draw * import org jhotdraw geom * import org jhotdraw draw AttributeKeys attribute keys * import org jhotdraw util * NodeFigure node figure TextFigure text figure { private LinkedList<AbstractConnector> linked list< connector> connectors private LocatorConnector locator connector north private LocatorConnector locator connector south private LocatorConnector locator connector east private LocatorConnector locator connector west NodeFigure node figure { RectangleFigure rectangle figure = new RectangleFigure rectangle figure setDecorator set decorator createConnectors create connectors setDrawDecoratorFirst set draw decorator first DECORATOR_INSETS set this new Insets2DDouble insets2 6 10 6 10 ResourceBundleUtil resource bundle util labels = ResourceBundleUtil resource bundle util getLAFBundle get bundle org jhotdraw samples net labels setText set text labels getString get nodeDefaultName node default } private createConnectors create connectors { connectors = new LinkedList<AbstractConnector> linked list< connector> connectors add new LocatorConnector locator connector this new RelativeLocator relative locator 0 5 0 connectors add new LocatorConnector locator connector this new RelativeLocator relative locator 0 5 1 connectors add new LocatorConnector locator connector this new RelativeLocator relative locator 1 0 5 connectors add new LocatorConnector locator connector this new RelativeLocator relative locator 0 0 5 for AbstractConnector connector connectors { setVisible set visible } } @Override @ Collection<Handle> collection< handle> createHandles create handles detailLevel detail level { util List<Handle> list< handle> handles = new LinkedList<Handle> linked list< handle> if detailLevel detail level == 0 { handles add new MoveHandle move handle this RelativeLocator relative locator northWest north west handles add new MoveHandle move handle this RelativeLocator relative locator northEast north east handles add new MoveHandle move handle this RelativeLocator relative locator southWest south west handles add new MoveHandle move handle this RelativeLocator relative locator southEast south east handles add new ConnectionHandle connection handle this RelativeLocator relative locator north new LineConnectionFigure line connection figure handles add new ConnectionHandle connection handle this RelativeLocator relative locator east new LineConnectionFigure line connection figure handles add new ConnectionHandle connection handle this RelativeLocator relative locator south new LineConnectionFigure line connection figure handles add new ConnectionHandle connection handle this RelativeLocator relative locator west new LineConnectionFigure line connection figure } handles } @Override @ Rectangle2D rectangle2 getFigureDrawBounds get figure draw bounds { Rectangle2D rectangle2 = super getFigureDrawBounds get figure draw bounds geom grow 10d 10d } @Override @ connector findConnector find connector Point2D point2 ConnectionFigure connection figure figure { min = MAX_VALUE connector closest = for connector connectors { Point2D point2 p2 = geom center getBounds get bounds = geom length2 p2 p2 if < min { min = closest = } } closest } @Override @ connector findCompatibleConnector find compatible connector connector isStart start { connectors getFirst get first } NodeFigure node figure clone { NodeFigure node figure that = NodeFigure node figure super clone that createConnectors create connectors that } @Override @ drawConnectors draw connectors Graphics2D graphics2 { for connector connectors { draw } } @Override @ getLayer get layer { -1 } setAttribute set attribute AttributeKey attribute key key newValue new value { super setAttribute set attribute key newValue new value if getDecorator get decorator != { getDecorator get decorator setAttribute set attribute key newValue new value } } } 