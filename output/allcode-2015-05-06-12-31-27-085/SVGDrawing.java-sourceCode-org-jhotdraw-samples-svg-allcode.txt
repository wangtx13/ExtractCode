org jhotdraw samples svg import IOException import org jhotdraw draw * import org jhotdraw samples svg figures * import org jhotdraw xml * SVGDrawing drawing DefaultDrawing default drawing { private title private description SVGDrawing drawing { } setTitle set title newValue new value { oldValue old value = title title = newValue new value firePropertyChange fire property change title oldValue old value newValue new value } getTitle get title { title } setDescription set description newValue new value { oldValue old value = description description = newValue new value firePropertyChange fire property change description oldValue old value newValue new value } getDescription get description { description } read DOMInput dom input IOException { for i=0 = getElementCount get element count < i++ { openElement open element = getTagName get tag if equals title { title = getText get text closeElement close element } else if equals desc { description = getText get text closeElement close element } else if equals defs { closeElement close element } else if equals use { closeElement close element } else if equals script { closeElement close element } else if equals style { closeElement close element } else if equals radialGradient radial gradient { closeElement close element } else { closeElement close element = readObject read if instanceof SVGDrawing drawing { SVGGroup group = new SVGGroup group willChange will change for figure child SVGDrawing drawing getFigures get figures { basicAdd basic add child } changed if ! isEmpty empty { add } } else if instanceof SVGFigure figure { if ! SVGFigure figure isEmpty empty { add figure } } else { new IOException unexpected child +f } } } readAttributes read attributes } readAttributes read attributes DOMInput dom input IOException { } @Override @ write DOMOutput dom output out IOException { out addAttribute add attribute xmlns http out addAttribute add attribute 1 2 out addAttribute add attribute baseProfile base profile tiny for figure getFigures get figures { out writeObject write } } } 