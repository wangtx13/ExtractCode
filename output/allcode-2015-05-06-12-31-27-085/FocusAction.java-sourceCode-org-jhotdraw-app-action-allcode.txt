org jhotdraw app action import org jhotdraw util * import beans * import awt * import awt event * import javax swing * import * import org jhotdraw app project FocusAction focus action AbstractAction action { = focus private project project FocusAction focus action project project { this project = project ResourceBundleUtil resource bundle util labels = ResourceBundleUtil resource bundle util getLAFBundle get bundle org jhotdraw app labels labels configureAction configure action this setEnabled set enabled project != project addPropertyChangeListener add property change listener new PropertyChangeListener property change listener { propertyChange property change PropertyChangeEvent property change event evt { ResourceBundleUtil resource bundle util labels = ResourceBundleUtil resource bundle util getLAFBundle get bundle org jhotdraw app labels = evt getPropertyName get property if equals { putValue put value action NAME evt getNewValue get new value == ? labels getString get unnamedFile unnamed evt getNewValue get new value getName get } } } } getValue get value key { if key == action NAME project != { getTitle get title } else { super getValue get value key } } private getTitle get title { ResourceBundleUtil resource bundle util labels = ResourceBundleUtil resource bundle util getLAFBundle get bundle org jhotdraw app labels title = labels getString get unnamedFile unnamed if project != { = project getFile get if == { title = labels getString get unnamedFile unnamed } else { title = getName get } if project hasUnsavedChanges has unsaved changes { title += * } title = labels getFormatted get formatted internalFrameTitle internal frame title title project getApplication get application getName get project getMultipleOpenId get multiple open } title } private JFrame frame getFrame get frame { JFrame frame SwingUtilities swing utilities getWindowAncestor get window ancestor project getComponent get component } private component getRootPaneContainer get root pane container { SwingUtilities swing utilities getRootPane get root pane project getComponent get component getParent get parent } actionPerformed action performed ActionEvent action event evt { component rpContainer rp container = getRootPaneContainer get root pane container if rpContainer rp container instanceof frame { frame frame = frame rpContainer rp container frame setExtendedState set extended state frame getExtendedState get extended state ~Frame ~ frame ICONIFIED frame toFront to front } else if rpContainer rp container instanceof JInternalFrame internal frame { JInternalFrame internal frame frame = JInternalFrame internal frame rpContainer rp container frame toFront to front try { frame setSelected set selected } catch PropertyVetoException property veto { } } project getComponent get component requestFocusInWindow request focus window } } 