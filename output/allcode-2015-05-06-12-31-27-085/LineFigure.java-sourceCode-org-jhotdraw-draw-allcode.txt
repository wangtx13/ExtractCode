org jhotdraw draw import javax swing undo * import awt * import awt event * import awt geom * import util * import org jhotdraw geom * LineFigure line figure BezierFigure bezier figure { LineFigure line figure { basicAddNode basic add node new BezierPath bezier path node new Point2D point2 0 0 basicAddNode basic add node new BezierPath bezier path node new Point2D point2 0 0 } Collection<Handle> collection< handle> createHandles create handles detailLevel detail level { LinkedList<Handle> linked list< handle> handles = new LinkedList<Handle> linked list< handle> switch detailLevel detail level { case 0 for i=0 = path size < i++ { handles add new BezierNodeHandle bezier node handle this } break } handles } canConnect can connect { } handleMouseClick handle mouse click Point2D point2 MouseEvent mouse event evt DrawingView drawing view view { if evt getClickCount get click count == 2 view getHandleDetailLevel get handle detail level == 0 { willChange will change index = basicSplitSegment basic split segment float 5f / view getScaleFactor get scale factor if index != -1 { BezierPath bezier path node newNode new node = getNode get node index fireUndoableEditHappened fire undoable edit happened new AbstractUndoableEdit undoable edit { redo CannotRedoException cannot redo { super redo willChange will change basicAddNode basic add node index newNode new node changed } undo CannotUndoException cannot undo { super undo willChange will change basicRemoveNode basic remove node index changed } } changed } } } } 