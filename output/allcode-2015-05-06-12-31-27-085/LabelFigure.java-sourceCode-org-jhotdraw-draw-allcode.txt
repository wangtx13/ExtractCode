org jhotdraw draw import awt * import awt font * import awt geom * import util * import * LabelFigure label figure TextFigure text figure implements FigureListener figure listener { private TextHolder text holder target LabelFigure label figure { this label } LabelFigure label figure text { setText set text text setEditable set editable } setLabelFor set label for TextHolder text holder target { if this target != { this target removeFigureListener remove figure listener this } this target = target if this target != { this target addFigureListener add figure listener this } } TextHolder text holder getLabelFor get label for { target == ? this target } tool getTool get tool Point2D point2 { target != contains ? new TextTool text tool target } figureAreaInvalidated figure area invalidated FigureEvent figure event { } figureAttributeChanged figure attribute changed FigureEvent figure event { } figureAdded figure added FigureEvent figure event { } figureChanged figure changed FigureEvent figure event { } figureRemoved figure removed FigureEvent figure event { if getFigure get figure == target { target removeFigureListener remove figure listener this target = } } figureRequestRemove figure request remove FigureEvent figure event { } remap HashMap hash map oldToNew old to new { super remap oldToNew old to new if target != { figure newTarget new target = figure oldToNew old to new get target if newTarget new target != { target removeFigureListener remove figure listener this target = TextHolder text holder newTarget new target newTarget new target addFigureListener add figure listener this } } } } 