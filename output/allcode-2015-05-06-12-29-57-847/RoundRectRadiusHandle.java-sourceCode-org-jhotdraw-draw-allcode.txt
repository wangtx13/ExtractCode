org jhotdraw draw import org jhotdraw geom geom import org jhotdraw util * import org jhotdraw undo * import awt * import awt geom * round rect radius handle handle { private = 6 private point original arc composite edit edit round rect radius handle figure owner { super owner } draw graphics2 { draw diamond color yellow color black } rectangle basic get bounds { rectangle = new rectangle locate grow get handlesize / 2 + 1 get handlesize / 2 + 1 } private point locate { round rectangle figure owner = round rectangle figure get owner rectangle = view drawing to view owner get bounds point arc = view drawing to view new point2 owner get arc width owner get arc height new point x+arc x/2+ y+arc y/2+ } track start point anchor modifiers { view get drawing fire undoable edit happened edit = new composite edit mehrfachaenderung round rectangle figure owner = round rectangle figure get owner original arc = view drawing to view new point2 owner get arc width owner get arc height } track step point anchor point modifiers { dx = - anchor dy = - anchor round rectangle figure owner = round rectangle figure get owner rectangle = view drawing to view owner get bounds point view arc = new point geom range 0 width 2* original arc x/2 + dx geom range 0 height 2* original arc y/2 + dy point2 arc = view view to drawing view arc owner set arc arc arc } track point anchor point modifiers { view get drawing fire undoable edit happened edit } } 