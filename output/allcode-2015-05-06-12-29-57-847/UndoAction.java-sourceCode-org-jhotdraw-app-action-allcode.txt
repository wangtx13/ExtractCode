org jhotdraw app action import awt * import awt event * import javax swing * import javax swing text * import beans * import util * import org jhotdraw util * import org jhotdraw app application import org jhotdraw app project undo action project action { = undo private resource bundle util labels = resource bundle util get bundle org jhotdraw app labels private property change listener redo action property listener = new property change listener { property change property change event evt { = evt get property if == action { put value action evt get new value } else if == enabled { update enabled state } } } undo action application app { super app labels configure action this } update enabled state { enabled = action real redo action = get real redo action if real redo action != { enabled = real redo action enabled } set enabled enabled } @ update project project old value project new value { super update project old value new value if new value != { put value action new value get action undo get value action update enabled state } } @ install project listeners project { super install project listeners get action undo add property change listener redo action property listener } @ uninstall project listeners project { super uninstall project listeners get action undo remove property change listener redo action property listener } action performed action event { action real redo action = get real redo action if real redo action != { real redo action action performed } } private action get real redo action { get current project == ? get current project get action undo } } 