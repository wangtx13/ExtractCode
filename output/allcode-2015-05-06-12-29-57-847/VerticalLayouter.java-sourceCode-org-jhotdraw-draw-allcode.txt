org jhotdraw draw import org jhotdraw util * import awt * import awt geom * import util * import org jhotdraw geom * import org jhotdraw draw attribute keys * vertical layouter layouter { rectangle2 calculate layout composite figure layoutable point2 anchor point2 { insets2 layout insets = LAYOUT_INSETS get layoutable if layout insets == layout insets = new insets2 0 0 0 0 rectangle2 layout bounds = new rectangle2 anchor anchor 0 0 for figure child layoutable get children { if child visible { dimension2 preferred size = child get preferred size insets2 ins = get insets child layout bounds width = math max layout bounds width preferred size width + ins left + ins right layout bounds height += preferred size height + ins top + ins bottom } } layout bounds width += layout insets left + layout insets right layout bounds height += layout insets top + layout insets bottom layout bounds } rectangle2 layout composite figure layoutable point2 anchor point2 { insets2 layout insets = LAYOUT_INSETS get layoutable if layout insets == layout insets = new insets2 0 0 0 0 rectangle2 layout bounds = calculate layout layoutable anchor = layout bounds + layout insets top for figure child layoutable get children { if child visible { insets2 insets = get insets child height = child get preferred size height child basic set bounds new point2 layout bounds + layout insets left + insets left + insets top new point2 layout bounds + layout bounds width - layout insets right - insets right + insets top + height += height + insets top + insets bottom } } layout bounds } } 