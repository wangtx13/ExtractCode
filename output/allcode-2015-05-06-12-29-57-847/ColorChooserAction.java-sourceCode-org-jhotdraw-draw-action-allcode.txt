org jhotdraw draw action import javax swing * import util * import awt * import beans * import javax swing * import org jhotdraw draw * color chooser action selected action { private attribute key key private color chooser color chooser color chooser action drawing editor editor attribute key key { this editor key } color chooser action drawing editor editor attribute key key icon icon { this editor key icon } color chooser action drawing editor editor attribute key key { this editor key } color chooser action drawing editor editor attribute key key icon icon { super editor this key = key put value action put value action SMALL_ICON icon set enabled } action performed awt event action event { if color chooser == { color chooser = new color chooser } color initial color = color get editor get default attribute key if initial color == { initial color = color red } color chosen color = color chooser show dialog component get source labels get draw color initial color if chosen color != { change attribute chosen color } } change attribute color value { drawing drawing = get drawing iterator = get view get selected figures iterator while has next { figure figure = figure next figure set attribute key value } get editor set default attribute key value } selection changed figure selection event evt { } } 