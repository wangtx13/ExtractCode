org jhotdraw draw import javax swing undo * import awt geom * composite transform edit undoable edit { private figure owner private affine transform tx progress composite transform edit figure owner affine transform tx { this owner = owner this tx = affine transform tx clone progress = } get presentation { figur transformieren } add edit undoable edit edit { if edit == this { } else { if ! progress { } else { edit die } } } replace edit undoable edit edit { } redo cannot redo { super redo owner will change owner basic transform tx owner changed } undo cannot undo { super undo owner will change try { owner basic transform tx create inverse } catch noninvertible transform { stack trace } owner changed } progress { 	return progress } { progress = } can undo { !is progress super can undo } can redo { !is progress super can redo } } 