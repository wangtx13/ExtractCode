org jhotdraw util prefs import awt * import awt event * import util prefs * import javax swing * preferences util { private preferences util { } install frame prefs handler preferences prefs window window { graphics configuration conf = window get graphics configuration rectangle screen bounds = conf get bounds insets screen insets = window get toolkit get screen insets conf screen bounds += screen insets left screen bounds += screen insets top screen bounds width -= screen insets left + screen insets right screen bounds height -= screen insets top + screen insets bottom dimension preferred size = window get preferred size dimension min size = window get minimum size rectangle bounds = new rectangle prefs get name+ 0 prefs get name+ 0 math max min size width prefs get name+ width preferred size width math max min size height prefs get name+ height preferred size height if ! screen bounds contains bounds { bounds = screen bounds + screen bounds width - bounds width / 2 bounds = screen bounds + screen bounds height - bounds height / 2 rectangle intersect screen bounds bounds bounds } window set bounds bounds window add component listener new component adapter { component moved component event evt { prefs put name+ evt get component get prefs put name+ evt get component get } component resized component event evt { prefs put name+ width evt get component get width prefs put name+ height evt get component get height } } } install palette prefs handler preferences prefs window window { install palette prefs handler prefs window 0 } install palette prefs handler preferences prefs window window { graphics configuration conf = window get graphics configuration rectangle screen bounds = conf get bounds insets screen insets = window get toolkit get screen insets conf screen bounds += screen insets left screen bounds += screen insets top screen bounds width -= screen insets left + screen insets right screen bounds height -= screen insets top + screen insets bottom dimension preferred size = window get preferred size rectangle bounds = new rectangle prefs get name+ + screen bounds prefs get name+ 0 + screen bounds preferred size width preferred size height if ! screen bounds contains bounds { bounds = screen bounds bounds = screen bounds } window set bounds bounds window add component listener new component adapter { component moved component event evt { prefs put name+ evt get component get prefs put name+ evt get component get } } } install internal frame prefs handler preferences prefs internal frame window desktop pane desktop { rectangle screen bounds = desktop get bounds screen bounds set location 0 0 insets screen insets = desktop get insets screen bounds += screen insets left screen bounds += screen insets top screen bounds width -= screen insets left + screen insets right screen bounds height -= screen insets top + screen insets bottom dimension preferred size = window get preferred size dimension min size = window get minimum size rectangle bounds = new rectangle prefs get name+ 0 prefs get name+ 0 math max min size width prefs get name+ width preferred size width math max min size height prefs get name+ height preferred size height if ! screen bounds contains bounds { bounds = screen bounds + screen bounds width - bounds width / 2 bounds = screen bounds + screen bounds height - bounds height / 2 rectangle intersect screen bounds bounds bounds } window set bounds bounds window add component listener new component adapter { component moved component event evt { prefs put name+ evt get component get prefs put name+ evt get component get } component resized component event evt { prefs put name+ width evt get component get width prefs put name+ height evt get component get height } } } install tool bar prefs handler preferences prefs tool bar toolbar { new tool bar prefs handler toolbar prefs } } 