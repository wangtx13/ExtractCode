org jhotdraw draw import org jhotdraw geom Dimension2DDouble dimension2 import org jhotdraw util * import awt * import awt geom * import util * LocatorLayouter locator layouter implements layouter { AttributeKey<Locator> attribute key< locator> LAYOUT_LOCATOR = new AttributeKey<Locator> attribute key< locator> layoutLocator layout locator LocatorLayouter locator layouter { } Rectangle2D rectangle2 calculateLayout calculate layout CompositeFigure composite figure compositeFigure composite figure Point2D point2 anchor Point2D point2 { Rectangle2D rectangle2 bounds = for figure child compositeFigure composite figure getChildren get children { locator locator = getLocator get locator child Rectangle2D rectangle2 if locator == { = child getBounds get bounds } else { Point2D point2 = locator locate compositeFigure composite figure Dimension2DDouble dimension2 = child getPreferredSize get preferred size = new Rectangle2D rectangle2 width height } if ! isEmpty empty { if bounds == { bounds = } else { bounds add } } } bounds == ? new Rectangle2D rectangle2 bounds } Rectangle2D rectangle2 layout CompositeFigure composite figure compositeFigure composite figure Point2D point2 anchor Point2D point2 { Rectangle2D rectangle2 bounds = for figure child compositeFigure composite figure getChildren get children { locator locator = getLocator get locator child Rectangle2D rectangle2 if locator == { = child getBounds get bounds } else { Point2D point2 = locator locate compositeFigure composite figure child Dimension2DDouble dimension2 = child getPreferredSize get preferred size = new Rectangle2D rectangle2 width height } child willChange will change child basicSetBounds basic set bounds new Point2D point2 getMinX get min getMinY get min new Point2D point2 getMaxX get max getMaxY get max child changed if ! isEmpty empty { if bounds == { bounds = } else { bounds add } } } bounds == ? new Rectangle2D rectangle2 bounds } private locator getLocator get locator figure { locator getAttribute get attribute LAYOUT_LOCATOR } } 