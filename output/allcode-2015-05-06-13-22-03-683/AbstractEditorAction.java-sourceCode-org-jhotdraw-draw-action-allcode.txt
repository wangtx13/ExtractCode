org jhotdraw draw action import org jhotdraw draw drawing import org jhotdraw draw DrawingEditor drawing editor import org jhotdraw draw DrawingView drawing view import org jhotdraw util * import javax swing * import javax swing undo * import util * import beans * AbstractEditorAction editor action AbstractAction action { DrawingEditor drawing editor editor ResourceBundleUtil resource bundle util labels = ResourceBundleUtil resource bundle util getLAFBundle get bundle org jhotdraw draw labels locale getDefault get default private PropertyChangeListener property change listener propertyChangeHandler property change handler = new PropertyChangeListener property change listener { propertyChange property change PropertyChangeEvent property change event evt { if evt getPropertyName get property equals enabled { updateEnabledState update enabled state } } } AbstractEditorAction editor action DrawingEditor drawing editor editor { this editor = editor if editor != { editor addPropertyChangeListener add property change listener propertyChangeHandler property change handler updateEnabledState update enabled state } } setEditor set editor DrawingEditor drawing editor newValue new value { if editor != { editor removePropertyChangeListener remove property change listener propertyChangeHandler property change handler } editor = newValue new value if editor != { editor addPropertyChangeListener add property change listener propertyChangeHandler property change handler updateEnabledState update enabled state } } updateEnabledState update enabled state { setEnabled set enabled editor != editor isEnabled enabled } DrawingEditor drawing editor getEditor get editor { editor } DrawingView drawing view getView get view { editor getView get view } drawing getDrawing get drawing { getView get view getDrawing get drawing } fireUndoableEditHappened fire undoable edit happened UndoableEdit undoable edit edit { getDrawing get drawing fireUndoableEditHappened fire undoable edit happened edit } } 