org jhotdraw geom import awt * import awt geom * import awt font * GrowStroke grow stroke DoubleStroke stroke { private float grow GrowStroke grow stroke float grow float miterLimit miter limit { super grow * 2 1f BasicStroke basic stroke CAP_SQUARE BasicStroke basic stroke JOIN_BEVEL miterLimit miter limit 0f this grow = grow } shape createStrokedShape create stroked shape shape { BezierPath bezier path bp = new BezierPath bezier path GeneralPath general path left = new GeneralPath general path GeneralPath general path right = new GeneralPath general path coords = new 6 for PathIterator path iterator = getPathIterator get path iterator 0 1d ! isDone done next { type = currentSegment current segment coords switch type { case PathIterator path iterator SEG_MOVETO if bp size != 0 { traceStroke trace stroke bp left right } bp clear bp moveTo move to coords 0 coords 1 break case PathIterator path iterator SEG_LINETO if coords 0 != bp get bp size 1 0 || coords 1 != bp get bp size 1 0 { bp lineTo line to coords 0 coords 1 } break case PathIterator path iterator SEG_QUADTO bp quadTo quad to coords 0 coords 1 coords 2 coords 3 break case PathIterator path iterator SEG_CUBICTO bp curveTo curve to coords 0 coords 1 coords 2 coords 3 coords 4 coords 5 break case PathIterator path iterator SEG_CLOSE bp setClosed set closed break } } if bp size > 1 { traceStroke trace stroke bp left right } if left getBounds2D get bounds2 contains right getBounds2D get bounds2 { grow > 0 ? left right } else { grow > 0 ? right left } } } 