org jhotdraw draw action import org jhotdraw undo * import javax swing * import awt * import beans * import util * import org jhotdraw draw * DefaultAttributeAction default attribute action AbstractSelectedAction selected action { private AttributeKey attribute key keys DefaultAttributeAction default attribute action DrawingEditor drawing editor editor AttributeKey attribute key key { this editor key } DefaultAttributeAction default attribute action DrawingEditor drawing editor editor AttributeKey attribute key keys { this editor keys } DefaultAttributeAction default attribute action DrawingEditor drawing editor editor AttributeKey attribute key key icon icon { this editor key icon } DefaultAttributeAction default attribute action DrawingEditor drawing editor editor AttributeKey attribute key key { this editor key } DefaultAttributeAction default attribute action DrawingEditor drawing editor editor AttributeKey attribute key key icon icon { this editor new AttributeKey attribute key {key} icon } DefaultAttributeAction default attribute action DrawingEditor drawing editor editor AttributeKey attribute key keys icon icon { super editor this keys = keys putValue put value AbstractAction action NAME putValue put value AbstractAction action SMALL_ICON icon setEnabled set enabled editor addPropertyChangeListener add property change listener new PropertyChangeListener property change listener { propertyChange property change PropertyChangeEvent property change event evt { if evt getPropertyName get property equals DefaultAttributeAction default attribute action this keys 0 { putValue put value attribute_ +DefaultAttributeAction + default attribute action this keys 0 evt getNewValue get new value } } } } actionPerformed action performed awt event ActionEvent action event evt { if getView get view != getView get view getSelectionCount get selection count > 0 { CompositeEdit composite edit edit = new CompositeEdit composite edit labels getString get drawAttributeChange draw attribute change fireUndoableEditHappened fire undoable edit happened edit changeAttribute change attribute fireUndoableEditHappened fire undoable edit happened edit } } changeAttribute change attribute { drawing drawing = getDrawing get drawing iterator = getView get view getSelectedFigures get selected figures iterator while hasNext has next { figure figure = figure next for j=0 < keys length j++ { figure setAttribute set attribute keys getEditor get editor getDefaultAttribute get default attribute keys } } } selectionChanged selection changed FigureSelectionEvent figure selection event evt { } } 