org jhotdraw app action import org jhotdraw util * import awt event * import javax swing * import util * import beans * ToggleToolBarAction toggle tool bar action AbstractAction action { private JToolBar tool bar toolBar tool bar private PropertyChangeListener property change listener propertyHandler property handler ToggleToolBarAction toggle tool bar action JToolBar tool bar toolBar tool bar label { super label propertyHandler property handler = new PropertyChangeListener property change listener { propertyChange property change PropertyChangeEvent property change event evt { = evt getPropertyName get property if equals visible { putValue put value actions SELECTED_KEY evt getNewValue get new value } } } putValue put value actions SELECTED_KEY setToolBar set tool bar toolBar tool bar } putValue put value key newValue new value { super putValue put value key newValue new value if key == actions SELECTED_KEY { if toolBar tool bar != { toolBar tool bar setVisible set visible newValue new value } } } setToolBar set tool bar JToolBar tool bar newValue new value { if toolBar tool bar != { toolBar tool bar removePropertyChangeListener remove property change listener propertyHandler property handler } toolBar tool bar = newValue new value if toolBar tool bar != { toolBar tool bar addPropertyChangeListener add property change listener propertyHandler property handler putValue put value actions SELECTED_KEY toolBar tool bar isVisible visible } } actionPerformed action performed ActionEvent action event { if toolBar tool bar != { putValue put value actions SELECTED_KEY ! toolBar tool bar isVisible visible } } } 