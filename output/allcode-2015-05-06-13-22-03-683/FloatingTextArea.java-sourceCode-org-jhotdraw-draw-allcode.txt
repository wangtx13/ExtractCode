org jhotdraw draw import awt geom * import awt * import javax swing BorderFactory border factory import javax swing JTextArea text area import javax swing JScrollPane scroll pane FloatingTextArea floating text area { JScrollPane scroll pane editScrollContainer edit scroll container JTextArea text area editWidget edit widget DrawingView drawing view view FloatingTextArea floating text area { editWidget edit widget = new JTextArea text area editWidget edit widget setWrapStyleWord set wrap style word editWidget edit widget setLineWrap set line wrap editScrollContainer edit scroll container = new JScrollPane scroll pane editWidget edit widget JScrollPane scroll pane VERTICAL_SCROLLBAR_ALWAYS JScrollPane scroll pane HORIZONTAL_SCROLLBAR_NEVER editScrollContainer edit scroll container setCursor set cursor cursor getPredefinedCursor get predefined cursor cursor DEFAULT_CURSOR editScrollContainer edit scroll container setBorder set border BorderFactory border factory createLineBorder create line border color black } createOverlay create overlay DrawingView drawing view view { createOverlay create overlay view } requestFocus request focus { editWidget edit widget requestFocus request focus } createOverlay create overlay DrawingView drawing view view TextHolder text holder figure { view getContainer get container add editScrollContainer edit scroll container 0 if figure != { font = figure getFont get font = deriveFont derive font getStyle get style float getSize get size * view getScaleFactor get scale factor editWidget edit widget setFont set font editWidget edit widget setForeground set foreground figure getTextColor get text color editWidget edit widget setBackground set background figure getFillColor get fill color editWidget edit widget setTabSize set tab size figure getTabSize get tab size } this view = view } setBounds set bounds Rectangle2D rectangle2 text { editWidget edit widget setText set text text editScrollContainer edit scroll container setBounds set bounds view drawingToView drawing to view editScrollContainer edit scroll container setVisible set visible editWidget edit widget setCaretPosition set caret position 0 editWidget edit widget requestFocus request focus } getText get text { editWidget edit widget getText get text } dimension getPreferredSize get preferred size cols { new dimension editWidget edit widget getWidth get width editWidget edit widget getHeight get height } endOverlay overlay { view getContainer get container requestFocus request focus if editScrollContainer edit scroll container != { editScrollContainer edit scroll container setVisible set visible view getContainer get container remove editScrollContainer edit scroll container rectangle bounds = editScrollContainer edit scroll container getBounds get bounds view getContainer get container repaint bounds bounds bounds width bounds height } } } 