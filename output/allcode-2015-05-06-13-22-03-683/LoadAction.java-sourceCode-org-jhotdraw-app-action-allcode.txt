org jhotdraw app action import org jhotdraw util * import org jhotdraw gui * import org jhotdraw gui event * import awt * import awt event * import javax swing * import * import org jhotdraw app application import org jhotdraw app project LoadAction load action SaveBeforeAction save before action { = load LoadAction load action application app { super app ResourceBundleUtil resource bundle util labels = ResourceBundleUtil resource bundle util getLAFBundle get bundle org jhotdraw app labels labels configureAction configure action this open } doIt it project project { JFileChooser chooser fileChooser chooser = project getOpenChooser get open chooser if fileChooser chooser showOpenDialog show open dialog project getComponent get component == JFileChooser chooser APPROVE_OPTION { openFile open project fileChooser chooser } else { project setEnabled set enabled } } openFile open project project JFileChooser chooser fileChooser chooser { = fileChooser chooser getSelectedFile get selected project execute new worker { construct { try { project read } catch IOException { } } finished value { fileOpened opened project value } } } fileOpened opened project project value { if value == { project setFile set project setEnabled set enabled getApplication get application addRecentFile add recent } else { JSheet sheet showMessageSheet show message sheet project getComponent get component <html> +UIManager + manager getString get OptionPane option pane css + <b>Couldn't <b> couldn't open the \ +file+ \ </b><br> + value JOptionPane option pane ERROR_MESSAGE new SheetListener sheet listener { optionSelected option selected SheetEvent sheet event evt { project clear project setEnabled set enabled } } } } } 