org jhotdraw app action import beans * import awt event * import javax swing * import org jhotdraw app application AbstractApplicationAction application action AbstractAction action { private application app private PropertyChangeListener property change listener applicationListener application listener AbstractApplicationAction application action application app { this app = app installApplicationListeners install application listeners app updateApplicationEnabled update application enabled } installApplicationListeners install application listeners application app { if applicationListener application listener == { applicationListener application listener = createApplicationListener create application listener } app addPropertyChangeListener add property change listener applicationListener application listener } uninstallApplicationListeners uninstall application listeners application app { app removePropertyChangeListener remove property change listener applicationListener application listener } private PropertyChangeListener property change listener createApplicationListener create application listener { new PropertyChangeListener property change listener { propertyChange property change PropertyChangeEvent property change event evt { if evt getPropertyName get property == enabled { updateApplicationEnabled update application enabled } } } } application getApplication get application { app } updateApplicationEnabled update application enabled { firePropertyChange fire property change enabled valueOf value of ! isEnabled enabled valueOf value of isEnabled enabled } @Override @ isEnabled enabled { app isEnabled enabled enabled } @Override @ setEnabled set enabled newValue new value { oldValue old value = this enabled this enabled = newValue new value firePropertyChange fire property change enabled valueOf value of oldValue old value app isEnabled enabled valueOf value of newValue new value app isEnabled enabled } } 