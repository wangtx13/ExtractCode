org jhotdraw draw import org jhotdraw util * import awt * import awt geom * import util * import org jhotdraw geom * import org jhotdraw draw AttributeKeys attribute keys * HorizontalLayouter horizontal layouter AbstractLayouter layouter { Rectangle2D rectangle2 calculateLayout calculate layout CompositeFigure composite figure compositeFigure composite figure Point2D point2 anchor Point2D point2 { Insets2DDouble insets2 layoutInsets layout insets = LAYOUT_INSETS get compositeFigure composite figure Rectangle2D rectangle2 layoutBounds layout bounds = new Rectangle2D rectangle2 anchor anchor 0 0 for figure child compositeFigure composite figure getChildren get children { if child isVisible visible { Dimension2DDouble dimension2 preferredSize preferred size = child getPreferredSize get preferred size Insets2DDouble insets2 ins = getInsets get insets child layoutBounds layout bounds height = math max layoutBounds layout bounds height preferredSize preferred size height + ins top + ins bottom layoutBounds layout bounds width += preferredSize preferred size width + ins left + ins right } } layoutBounds layout bounds width += layoutInsets layout insets left + layoutInsets layout insets right layoutBounds layout bounds height += layoutInsets layout insets top + layoutInsets layout insets bottom layoutBounds layout bounds } Rectangle2D rectangle2 layout CompositeFigure composite figure compositeFigure composite figure Point2D point2 anchor Point2D point2 { Insets2DDouble insets2 layoutInsets layout insets = LAYOUT_INSETS get compositeFigure composite figure Rectangle2D rectangle2 layoutBounds layout bounds = calculateLayout calculate layout compositeFigure composite figure anchor = layoutBounds layout bounds + layoutInsets layout insets left for figure child compositeFigure composite figure getChildren get children { if child isVisible visible { Insets2DDouble insets2 insets = getInsets get insets child width = child getPreferredSize get preferred size width child basicSetBounds basic set bounds new Point2D point2 + insets left layoutBounds layout bounds + layoutInsets layout insets top + insets top new Point2D point2 + insets left + width layoutBounds layout bounds + layoutBounds layout bounds height layoutInsets layout insets bottom insets bottom += width + insets left + insets right } } layoutBounds layout bounds } } 