org jhotdraw draw action import awt * import awt event * import javax swing * import javax swing text * import javax swing event * import util * import org jhotdraw draw * AttributeToggler attribute toggler implements ActionListener action listener { private DrawingEditor drawing editor editor private AttributeKey attribute key key private value1 private value2 private action compatibleTextAction compatible text action AttributeToggler attribute toggler DrawingEditor drawing editor editor AttributeKey attribute key key value1 value2 { this editor key value1 value2 } AttributeToggler attribute toggler DrawingEditor drawing editor editor AttributeKey attribute key key value1 value2 action compatibleTextAction compatible text action { this editor = editor this key = key this value1 = value1 this value2 = value2 this compatibleTextAction compatible text action = compatibleTextAction compatible text action } DrawingView drawing view getView get view { editor getView get view } DrawingEditor drawing editor getEditor get editor { editor } actionPerformed action performed ActionEvent action event evt { if compatibleTextAction compatible text action != { component focusOwner focus owner = KeyboardFocusManager keyboard focus manager getCurrentKeyboardFocusManager get current keyboard focus manager getPermanentFocusOwner get permanent focus owner if focusOwner focus owner != focusOwner focus owner instanceof JTextComponent text component { compatibleTextAction compatible text action actionPerformed action performed evt } } iterator = getView get view getSelectedFigures get selected figures iterator newValue new value = if hasNext has next { figure = figure next attr = getAttribute get attribute key if value1 == attr == || value1 != attr != attr equals value1 { newValue new value = value2 } else { newValue new value = value1 } getEditor get editor setDefaultAttribute set default attribute key newValue new value setAttribute set attribute key newValue new value } while hasNext has next { figure = figure next setAttribute set attribute key newValue new value } } } 