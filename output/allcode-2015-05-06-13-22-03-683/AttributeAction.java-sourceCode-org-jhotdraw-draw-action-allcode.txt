org jhotdraw draw action import org jhotdraw undo * import javax swing * import javax swing text * import util * import awt * import org jhotdraw draw * import org jhotdraw geom * AttributeAction attribute action AbstractSelectedAction selected action { Map<AttributeKey map< attribute key object> attributes AttributeAction attribute action DrawingEditor drawing editor editor AttributeKey attribute key key value { this editor key value } AttributeAction attribute action DrawingEditor drawing editor editor AttributeKey attribute key key value icon icon { this editor key value icon } AttributeAction attribute action DrawingEditor drawing editor editor AttributeKey attribute key key value { this editor key value } AttributeAction attribute action DrawingEditor drawing editor editor AttributeKey attribute key key value icon icon { this editor key value icon } AttributeAction attribute action DrawingEditor drawing editor editor AttributeKey attribute key key value icon icon action compatibleTextAction compatible text action { super editor this attributes = new HashMap<AttributeKey hash map< attribute key object> attributes put key value putValue put value AbstractAction action NAME putValue put value AbstractAction action SMALL_ICON icon setEnabled set enabled } AttributeAction attribute action DrawingEditor drawing editor editor Map<AttributeKey map< attribute key object> attributes icon icon { super editor this attributes = attributes putValue put value AbstractAction action NAME putValue put value AbstractAction action SMALL_ICON icon setEnabled set enabled } actionPerformed action performed awt event ActionEvent action event evt { if getView get view != getView get view getSelectionCount get selection count > 0 { CompositeEdit composite edit edit = new CompositeEdit composite edit labels getString get drawAttributeChange draw attribute change fireUndoableEditHappened fire undoable edit happened edit changeAttributes change attributes fireUndoableEditHappened fire undoable edit happened edit } } changeAttributes change attributes { drawing drawing = getDrawing get drawing for map Entry<AttributeKey entry< attribute key object> entry attributes entrySet entry set { AttributeKey attribute key key = entry getKey get key value = entry getValue get value iterator = getView get view getSelectedFigures get selected figures iterator while hasNext has next { figure figure = figure next figure setAttribute set attribute key value } getEditor get editor setDefaultAttribute set default attribute key value } } } 