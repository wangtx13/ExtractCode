org jhotdraw draw import awt event * import awt * import util * SelectAreaTracker select area tracker AbstractTool tool { private rectangle rubberBand rubber band = new rectangle SelectAreaTracker select area tracker { } mousePressed mouse pressed MouseEvent mouse event evt { super mousePressed mouse pressed evt clearRubberBand clear rubber band } mouseReleased mouse released MouseEvent mouse event evt { selectGroup select group evt isShiftDown shift down clearRubberBand clear rubber band } mouseDragged mouse dragged MouseEvent mouse event evt { rectangle invalidatedArea invalidated area = rectangle rubberBand rubber band clone rubberBand rubber band setBounds set bounds math min anchor evt getX get math min anchor evt getY get math anchor evt getX get math anchor evt getY get if invalidatedArea invalidated area isEmpty empty { invalidatedArea invalidated area = rectangle rubberBand rubber band clone } else { invalidatedArea invalidated area = invalidatedArea invalidated area union rubberBand rubber band } fireAreaInvalidated fire area invalidated invalidatedArea invalidated area } mouseMoved mouse moved MouseEvent mouse event evt { clearRubberBand clear rubber band updateCursor update cursor editor findView find view container evt getSource get source new point evt getX get evt getY get } private clearRubberBand clear rubber band { if rubberBand rubber band width > 0 { fireAreaInvalidated fire area invalidated rubberBand rubber band rubberBand rubber band width = 0 } } draw Graphics2D graphics2 { setStroke set stroke new BasicStroke basic stroke setColor set color color black drawRect draw rect rubberBand rubber band rubberBand rubber band rubberBand rubber band width 1 rubberBand rubber band height 1 } private selectGroup select group toggle { getView get view addToSelection add to selection getView get view findFiguresWithin find figures within rubberBand rubber band } } 