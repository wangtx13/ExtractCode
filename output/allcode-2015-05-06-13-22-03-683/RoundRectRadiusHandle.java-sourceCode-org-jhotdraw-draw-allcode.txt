org jhotdraw draw import org jhotdraw geom geom import org jhotdraw util * import org jhotdraw undo * import awt * import awt geom * RoundRectRadiusHandle round rect radius handle AbstractHandle handle { private OFFSET = 6 private point originalArc original arc CompositeEdit composite edit edit RoundRectRadiusHandle round rect radius handle figure owner { super owner } draw Graphics2D graphics2 { drawDiamond draw diamond color yellow color black } rectangle basicGetBounds basic get bounds { rectangle = new rectangle locate grow getHandlesize get handlesize / 2 + 1 getHandlesize get handlesize / 2 + 1 } private point locate { RoundRectangleFigure round rectangle figure owner = RoundRectangleFigure round rectangle figure getOwner get owner rectangle = view drawingToView drawing to view owner getBounds get bounds point arc = view drawingToView drawing to view new Point2D point2 owner getArcWidth get arc width owner getArcHeight get arc height new point x+arc x/2+OFFSET x/2+ y+arc y/2+OFFSET y/2+ } trackStart track start point anchor modifiersEx modifiers { view getDrawing get drawing fireUndoableEditHappened fire undoable edit happened edit = new CompositeEdit composite edit mehrfachaenderung RoundRectangleFigure round rectangle figure owner = RoundRectangleFigure round rectangle figure getOwner get owner originalArc original arc = view drawingToView drawing to view new Point2D point2 owner getArcWidth get arc width owner getArcHeight get arc height } trackStep track step point anchor point modifiersEx modifiers { dx = anchor dy = anchor RoundRectangleFigure round rectangle figure owner = RoundRectangleFigure round rectangle figure getOwner get owner rectangle = view drawingToView drawing to view owner getBounds get bounds point viewArc view arc = new point geom range 0 width 2* originalArc original arc x/2 + dx geom range 0 height 2* originalArc original arc y/2 + dy Point2D point2 arc = view viewToDrawing view to drawing viewArc view arc owner setArc set arc arc arc } trackEnd track point anchor point modifiersEx modifiers { view getDrawing get drawing fireUndoableEditHappened fire undoable edit happened edit } } 