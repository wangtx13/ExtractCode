org jhotdraw draw import org jhotdraw util * import javax swing undo * import awt geom * import util * TransformEdit transform edit AbstractUndoableEdit undoable edit { private Collection<Figure> collection< figure> figures private AffineTransform affine transform tx TransformEdit transform edit figure figure AffineTransform affine transform tx { figures = new LinkedList<Figure> linked list< figure> LinkedList<Figure> linked list< figure> figures add figure this tx = AffineTransform affine transform tx clone } TransformEdit transform edit Collection<Figure> collection< figure> figures AffineTransform affine transform tx { this figures = figures this tx = AffineTransform affine transform tx clone } getPresentationName get presentation { ResourceBundleUtil resource bundle util labels = ResourceBundleUtil resource bundle util getLAFBundle get bundle org jhotdraw draw labels locale getDefault get default labels getString get transformFigure transform figure } addEdit add edit UndoableEdit undoable edit anEdit edit { if anEdit edit instanceof TransformEdit transform edit { TransformEdit transform edit that = TransformEdit transform edit anEdit edit if that figures == this figures { this tx concatenate that tx that die } } } replaceEdit replace edit UndoableEdit undoable edit anEdit edit { if anEdit edit instanceof TransformEdit transform edit { TransformEdit transform edit that = TransformEdit transform edit anEdit edit if that figures == this figures { this tx preConcatenate concatenate that tx that die } } } redo CannotRedoException cannot redo { super redo for figure figures { willChange will change basicTransform basic transform tx changed } } undo CannotUndoException cannot undo { super undo try { AffineTransform affine transform inverse = tx createInverse create inverse for figure figures { willChange will change basicTransform basic transform inverse changed } } catch NoninvertibleTransformException noninvertible transform { printStackTrace stack trace } } toString to { getClass get getName get +'@'+hashCode +'@'+hash + tx +tx } } 