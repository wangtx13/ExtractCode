org jhotdraw draw import org jhotdraw util * import org jhotdraw undo * import awt * import awt event * import awt geom * import util * import org jhotdraw geom * RotateHandle rotate handle AbstractHandle handle { private point location private restoreData restore data private AffineTransform affine transform transform private Point2D point2 center private startTheta start theta private startLength start length RotateHandle rotate handle figure owner { super owner } isCombinableWith combinable with handle { } draw Graphics2D graphics2 { drawDiamond draw diamond color green color black } rectangle basicGetBounds basic get bounds { rectangle = new rectangle getLocation get location grow getHandlesize get handlesize / 2 getHandlesize get handlesize / 2 } point getLocation get location { if location == { view drawingToView drawing to view getOrigin get origin } location } private Point2D point2 getOrigin get origin { Rectangle2D rectangle2 bounds = getOwner get owner getBounds get bounds new Point2D point2 bounds getCenterX get center bounds getHandlesize get handlesize } trackStart track start point anchor modifiersEx modifiers { location = new point anchor anchor restoreData restore data = getOwner get owner getRestoreData get restore data Rectangle2D rectangle2 bounds = getOwner get owner getBounds get bounds transform = new AffineTransform affine transform center = new Point2D point2 bounds getCenterX get center bounds getCenterY get center Point2D point2 anchorPoint anchor point = view viewToDrawing view to drawing anchor startTheta start theta = geom angle center center anchorPoint anchor point anchorPoint anchor point startLength start length = geom length center center anchorPoint anchor point anchorPoint anchor point } trackStep track step point anchor point modifiersEx modifiers { location = new point Point2D point2 leadPoint point = view viewToDrawing view to drawing stepTheta step theta = geom angle center center leadPoint point leadPoint point stepLength step length = geom length center center leadPoint point leadPoint point transform setToIdentity set to identity transform translate center center transform rotate stepTheta step theta startTheta start theta transform translate center center getOwner get owner willChange will change getOwner get owner restoreTo restore to restoreData restore data getOwner get owner basicTransform basic transform transform getOwner get owner changed } trackEnd track point anchor point modifiersEx modifiers { view getDrawing get drawing fireUndoableEditHappened fire undoable edit happened new RestoreDataEdit restore data edit getOwner get owner restoreData restore data location = } } 