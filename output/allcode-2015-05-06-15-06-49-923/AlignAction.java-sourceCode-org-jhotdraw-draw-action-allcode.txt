org jhotdraw draw action import org jhotdraw draw drawingeditor drawing editor import org jhotdraw draw figure import org jhotdraw draw figureselectionevent figure selection event import org jhotdraw draw transformedit transform edit import org jhotdraw undo compositeedit composite edit import javax swing * import awt * import awt geom * import util * import javax swing undo * alignaction align action abstractselectedaction selected action { alignaction align action drawingeditor drawing editor editor { super editor } updateenabledstate update enabled state { if getview get view != { setenabled set enabled getview get view isenabled is enabled getview get view getselectioncount get selection count > 1 } else { setenabled set enabled } } actionperformed action performed awt event actionevent action event e { compositeedit composite edit edit = new compositeedit composite edit labels getstring get align fireundoableedithappened fire undoable edit happened edit alignfigures align figures getview get view getselectedfigures get selected figures getselectionbounds get selection bounds fireundoableedithappened fire undoable edit happened edit } alignfigures align figures collection selectedfigures selected figures rectangle2d rectangle2 d selectionbounds selection bounds rectangle2d rectangle2 d getselectionbounds get selection bounds { rectangle2d rectangle2 d bounds = for iterator i=getview i=get view getselectedfigures get selected figures iterator i hasnext has next { figure f = figure i next if bounds == { bounds = f getbounds get bounds } else { bounds add f getbounds get bounds } } bounds } north alignaction align action { north drawingeditor drawing editor editor { super editor labels configureaction configure action this alignnorth align north } alignfigures align figures collection selectedfigures selected figures rectangle2d rectangle2 d selectionbounds selection bounds { y = selectionbounds selection bounds y for iterator i=getview i=get view getselectedfigures get selected figures iterator i hasnext has next { figure f = figure i next f willchange will change rectangle2d rectangle2 d b = f getbounds get bounds affinetransform affine transform tx = new affinetransform affine transform tx translate 0 y b y f basictransform basic transform tx f changed fireundoableedithappened fire undoable edit happened new transformedit transform edit f tx } } } east alignaction align action { east drawingeditor drawing editor editor { super editor labels configureaction configure action this aligneast align east } alignfigures align figures collection selectedfigures selected figures rectangle2d rectangle2 d selectionbounds selection bounds { x = selectionbounds selection bounds x + selectionbounds selection bounds width for iterator i=getview i=get view getselectedfigures get selected figures iterator i hasnext has next { figure f = figure i next f willchange will change rectangle2d rectangle2 d b = f getbounds get bounds affinetransform affine transform tx = new affinetransform affine transform tx translate x b x b width 0 f basictransform basic transform tx f changed fireundoableedithappened fire undoable edit happened new transformedit transform edit f tx } } } west alignaction align action { west drawingeditor drawing editor editor { super editor labels configureaction configure action this alignwest align west } alignfigures align figures collection selectedfigures selected figures rectangle2d rectangle2 d selectionbounds selection bounds { x = selectionbounds selection bounds x for iterator i=getview i=get view getselectedfigures get selected figures iterator i hasnext has next { figure f = figure i next f willchange will change rectangle2d rectangle2 d b = f getbounds get bounds affinetransform affine transform tx = new affinetransform affine transform tx translate x b x 0 f basictransform basic transform tx f changed fireundoableedithappened fire undoable edit happened new transformedit transform edit f tx } } } south alignaction align action { south drawingeditor drawing editor editor { super editor labels configureaction configure action this alignsouth align south } alignfigures align figures collection selectedfigures selected figures rectangle2d rectangle2 d selectionbounds selection bounds { y = selectionbounds selection bounds y + selectionbounds selection bounds height for iterator i=getview i=get view getselectedfigures get selected figures iterator i hasnext has next { figure f = figure i next f willchange will change rectangle2d rectangle2 d b = f getbounds get bounds affinetransform affine transform tx = new affinetransform affine transform tx translate 0 y b y b height f basictransform basic transform tx f changed fireundoableedithappened fire undoable edit happened new transformedit transform edit f tx } } } vertical alignaction align action { vertical drawingeditor drawing editor editor { super editor labels configureaction configure action this alignvertical align vertical } alignfigures align figures collection selectedfigures selected figures rectangle2d rectangle2 d selectionbounds selection bounds { y = selectionbounds selection bounds y + selectionbounds selection bounds height / 2 for iterator i=getview i=get view getselectedfigures get selected figures iterator i hasnext has next { figure f = figure i next f willchange will change rectangle2d rectangle2 d b = f getbounds get bounds affinetransform affine transform tx = new affinetransform affine transform tx translate 0 y b y b height / 2 f basictransform basic transform tx f changed fireundoableedithappened fire undoable edit happened new transformedit transform edit f tx } } } horizontal alignaction align action { horizontal drawingeditor drawing editor editor { super editor labels configureaction configure action this alignhorizontal align horizontal } alignfigures align figures collection selectedfigures selected figures rectangle2d rectangle2 d selectionbounds selection bounds { x = selectionbounds selection bounds x + selectionbounds selection bounds width / 2 for iterator i=getview i=get view getselectedfigures get selected figures iterator i hasnext has next { figure f = figure i next f willchange will change rectangle2d rectangle2 d b = f getbounds get bounds affinetransform affine transform tx = new affinetransform affine transform tx translate x b x b width / 2 0 f basictransform basic transform tx f changed fireundoableedithappened fire undoable edit happened new transformedit transform edit f tx } } } } 