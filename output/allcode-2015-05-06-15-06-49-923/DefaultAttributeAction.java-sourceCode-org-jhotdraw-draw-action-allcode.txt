org jhotdraw draw action import org jhotdraw undo * import javax swing * import awt * import beans * import util * import org jhotdraw draw * defaultattributeaction default attribute action abstractselectedaction selected action { private attributekey attribute key keys defaultattributeaction default attribute action drawingeditor drawing editor editor attributekey attribute key key { this editor key } defaultattributeaction default attribute action drawingeditor drawing editor editor attributekey attribute key keys { this editor keys } defaultattributeaction default attribute action drawingeditor drawing editor editor attributekey attribute key key icon icon { this editor key icon } defaultattributeaction default attribute action drawingeditor drawing editor editor attributekey attribute key key name { this editor key name } defaultattributeaction default attribute action drawingeditor drawing editor editor attributekey attribute key key name icon icon { this editor new attributekey attribute key {key} name icon } defaultattributeaction default attribute action drawingeditor drawing editor editor attributekey attribute key keys name icon icon { super editor this keys = keys putvalue put value abstractaction action name n a m e name putvalue put value abstractaction action SMALL_ICON icon setenabled set enabled editor addpropertychangelistener add property change listener new propertychangelistener property change listener { propertychange property change propertychangeevent property change event evt { if evt getpropertyname get property name equals defaultattributeaction default attribute action this keys 0 { putvalue put value attribute_ +defaultattributeaction + default attribute action this keys 0 evt getnewvalue get new value } } } } actionperformed action performed awt event actionevent action event evt { if getview get view != getview get view getselectioncount get selection count > 0 { compositeedit composite edit edit = new compositeedit composite edit labels getstring get drawattributechange draw attribute change fireundoableedithappened fire undoable edit happened edit changeattribute change attribute fireundoableedithappened fire undoable edit happened edit } } changeattribute change attribute { drawing drawing = getdrawing get drawing iterator i = getview get view getselectedfigures get selected figures iterator while i hasnext has next { figure figure = figure i next for j=0 j < keys length j++ { figure setattribute set attribute keys j geteditor get editor getdefaultattribute get default attribute keys j } } } selectionchanged selection changed figureselectionevent figure selection event evt { } } 