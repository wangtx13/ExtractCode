org jhotdraw draw import javax swing undo * import awt geom * compositetransformedit composite transform edit abstractundoableedit undoable edit { private abstractfigure figure owner private affinetransform affine transform tx inprogress in progress compositetransformedit composite transform edit abstractfigure figure owner affinetransform affine transform tx { this owner = owner this tx = affinetransform affine transform tx clone inprogress in progress = } getpresentationname get presentation name { figur transformieren } addedit add edit undoableedit undoable edit anedit an edit { if anedit an edit == this { end } else { if ! inprogress in progress { } else { anedit an edit die } } } replaceedit replace edit undoableedit undoable edit anedit an edit { } redo cannotredoexception cannot redo { super redo owner willchange will change owner basictransform basic transform tx owner changed } undo cannotundoexception cannot undo { super undo owner willchange will change try { owner basictransform basic transform tx createinverse create inverse } catch noninvertibletransformexception noninvertible transform ex { ex printstacktrace print stack trace } owner changed } isinprogress is in progress { 	return inprogress in progress } end { inprogress in progress = } canundo can undo { !isinprogress !is in progress super canundo can undo } canredo can redo { !isinprogress !is in progress super canredo can redo } } 