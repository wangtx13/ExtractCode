org jhotdraw draw import awt event * import awt * import util * selectareatracker select area tracker abstracttool tool { private rectangle rubberband rubber band = new rectangle selectareatracker select area tracker { } mousepressed mouse pressed mouseevent mouse event evt { super mousepressed mouse pressed evt clearrubberband clear rubber band } mousereleased mouse released mouseevent mouse event evt { selectgroup select group evt isshiftdown is shift down clearrubberband clear rubber band } mousedragged mouse dragged mouseevent mouse event evt { rectangle invalidatedarea invalidated area = rectangle rubberband rubber band clone rubberband rubber band setbounds set bounds math min anchor x evt getx get x math min anchor y evt gety get y math abs anchor x evt getx get x math abs anchor y evt gety get y if invalidatedarea invalidated area isempty is empty { invalidatedarea invalidated area = rectangle rubberband rubber band clone } else { invalidatedarea invalidated area = invalidatedarea invalidated area union rubberband rubber band } fireareainvalidated fire area invalidated invalidatedarea invalidated area } mousemoved mouse moved mouseevent mouse event evt { clearrubberband clear rubber band updatecursor update cursor editor findview find view container evt getsource get source new point evt getx get x evt gety get y } private clearrubberband clear rubber band { if rubberband rubber band width > 0 { fireareainvalidated fire area invalidated rubberband rubber band rubberband rubber band width = 0 } } draw graphics2d graphics2 d g { g setstroke set stroke new basicstroke basic stroke g setcolor set color color black g drawrect draw rect rubberband rubber band x rubberband rubber band y rubberband rubber band width 1 rubberband rubber band height 1 } private selectgroup select group toggle { getview get view addtoselection add to selection getview get view findfigureswithin find figures within rubberband rubber band } } 