org jhotdraw samples net import awt * import awt event * import util * import javax swing * import org jhotdraw app * import org jhotdraw app action * import org jhotdraw draw * import org jhotdraw draw action * import org jhotdraw samples net figures * import org jhotdraw util * netapplicationmodel net application model defaultapplicationmodel default application model { private scalefactors scale factors = {5 4 3 2 1 5 1 25 1 0 75 0 5 0 25 0 10} private toolbuttonlistener tool button listener implements itemlistener item listener { private tool tool private drawingeditor drawing editor editor toolbuttonlistener tool button listener tool t drawingeditor drawing editor editor { this tool = t this editor = editor } itemstatechanged item state changed itemevent item event evt { if evt getstatechange get state change == itemevent item event selected s e l e c t e d { editor settool set tool tool } } } private defaultdrawingeditor default drawing editor sharededitor shared editor private hashmap<string hash map< action> actions netapplicationmodel net application model { } initapplication init application application a { resourcebundleutil resource bundle util drawlabels draw labels = resourcebundleutil resource bundle util getlafbundle get l a f bundle org jhotdraw draw labels resourcebundleutil resource bundle util labels = resourcebundleutil resource bundle util getlafbundle get l a f bundle org jhotdraw samples net labels abstractaction action aa putaction put action exportaction export action new exportaction export action a putaction put action togglegrid toggle grid aa = new toggleprojectpropertyaction toggle project property action a gridvisible grid visible drawlabels draw labels configureaction configure action aa aligngrid align grid for sf scalefactors scale factors { putaction put action sf*100 + % aa = new projectpropertyaction project property action a scalefactor scale factor type t y p e new sf aa putvalue put value action name n a m e sf*100 + % } } defaultdrawingeditor default drawing editor getsharededitor get shared editor { if sharededitor shared editor == { sharededitor shared editor = new defaultdrawingeditor default drawing editor } sharededitor shared editor } initproject init project application a project p { if a issharingtoolsamongprojects is sharing tools among projects { netproject net project p setdrawingeditor set drawing editor getsharededitor get shared editor } } private addcreationbuttonsto add creation buttons to jtoolbar j tool bar tb drawingeditor drawing editor editor { hashmap<attributekey hash map< attribute key object> attributes resourcebundleutil resource bundle util labels = resourcebundleutil resource bundle util getlafbundle get l a f bundle org jhotdraw samples net labels resourcebundleutil resource bundle util drawlabels draw labels = resourcebundleutil resource bundle util getlafbundle get l a f bundle org jhotdraw draw labels toolbarbuttonfactory tool bar button factory addselectiontoolto add selection tool to tb editor tb addseparator add separator attributes = new hashmap<attributekey hash map< attribute key object> attributes put attributekeys attribute keys FILL_COLOR color white attributes put attributekeys attribute keys STROKE_COLOR color black attributes put attributekeys attribute keys TEXT_COLOR color black toolbarbuttonfactory tool bar button factory addtoolto add tool to tb editor new texttool text tool new nodefigure node figure attributes createnode create node labels attributes = new hashmap<attributekey hash map< attribute key object> attributes put attributekeys attribute keys STROKE_COLOR new color 0x000099 toolbarbuttonfactory tool bar button factory addtoolto add tool to tb editor new connectiontool connection tool new lineconnectionfigure line connection figure attributes createlink create link labels } util list<jtoolbar> list< j tool bar> createtoolbars create tool bars application a project pr { resourcebundleutil resource bundle util drawlabels draw labels = resourcebundleutil resource bundle util getlafbundle get l a f bundle org jhotdraw draw labels resourcebundleutil resource bundle util labels = resourcebundleutil resource bundle util getlafbundle get l a f bundle org jhotdraw samples net labels netproject net project p = netproject net project pr drawingeditor drawing editor editor if p == { editor = getsharededitor get shared editor } else { editor = p getdrawingeditor get drawing editor } linkedlist<jtoolbar> linked list< j tool bar> list = new linkedlist<jtoolbar> linked list< j tool bar> jtoolbar j tool bar tb tb = new jtoolbar j tool bar addcreationbuttonsto add creation buttons to tb editor tb setname set name drawlabels draw labels getstring get drawtoolbartitle draw tool bar title list add tb tb = new jtoolbar j tool bar toolbarbuttonfactory tool bar button factory addattributesbuttonsto add attributes buttons to tb editor tb setname set name drawlabels draw labels getstring get attributestoolbartitle attributes tool bar title list add tb tb = new jtoolbar j tool bar toolbarbuttonfactory tool bar button factory addalignmentbuttonsto add alignment buttons to tb editor tb setname set name drawlabels draw labels getstring get alignmenttoolbartitle alignment tool bar title list add tb list } util list<jmenu> list< j menu> createmenus create menus application a project pr { netproject net project p = netproject net project pr resourcebundleutil resource bundle util labels = resourcebundleutil resource bundle util getlafbundle get l a f bundle org jhotdraw app labels linkedlist<jmenu> linked list< j menu> mb = new linkedlist<jmenu> linked list< j menu> jmenu j menu m m2 jmenuitem j menu item mi jradiobuttonmenuitem j radio button menu item rbmi jcheckboxmenuitem j check box menu item cbmi buttongroup button group group m = new jmenu j menu labels configuremenu configure menu m view cbmi = new jcheckboxmenuitem j check box menu item getaction get action togglegrid toggle grid actions configurejcheckboxmenuitem configure j check box menu item cbmi getaction get action togglegrid toggle grid m add cbmi m2 = new jmenu j menu zoom for sf scalefactors scale factors { = sf*100 + % cbmi = new jcheckboxmenuitem j check box menu item getaction get action actions configurejcheckboxmenuitem configure j check box menu item cbmi getaction get action m2 add cbmi } m add m2 mb add m mb } } 