org jhotdraw draw action import org jhotdraw draw drawing import org jhotdraw draw drawingeditor drawing editor import org jhotdraw draw drawingview drawing view import org jhotdraw util * import javax swing * import javax swing undo * import util * import beans * abstracteditoraction editor action abstractaction action { drawingeditor drawing editor editor resourcebundleutil resource bundle util labels = resourcebundleutil resource bundle util getlafbundle get l a f bundle org jhotdraw draw labels locale getdefault get default private propertychangelistener property change listener propertychangehandler property change handler = new propertychangelistener property change listener { propertychange property change propertychangeevent property change event evt { if evt getpropertyname get property name equals enabled { updateenabledstate update enabled state } } } abstracteditoraction editor action drawingeditor drawing editor editor { this editor = editor if editor != { editor addpropertychangelistener add property change listener propertychangehandler property change handler updateenabledstate update enabled state } } seteditor set editor drawingeditor drawing editor newvalue new value { if editor != { editor removepropertychangelistener remove property change listener propertychangehandler property change handler } editor = newvalue new value if editor != { editor addpropertychangelistener add property change listener propertychangehandler property change handler updateenabledstate update enabled state } } updateenabledstate update enabled state { setenabled set enabled editor != editor isenabled is enabled } drawingeditor drawing editor geteditor get editor { editor } drawingview drawing view getview get view { editor getview get view } drawing getdrawing get drawing { getview get view getdrawing get drawing } fireundoableedithappened fire undoable edit happened undoableedit undoable edit edit { getdrawing get drawing fireundoableedithappened fire undoable edit happened edit } } 