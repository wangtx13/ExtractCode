org jhotdraw draw action import org jhotdraw undo * import javax swing * import javax swing text * import util * import awt * import org jhotdraw draw * import org jhotdraw geom * attributeaction attribute action abstractselectedaction selected action { map<attributekey map< attribute key object> attributes attributeaction attribute action drawingeditor drawing editor editor attributekey attribute key key value { this editor key value } attributeaction attribute action drawingeditor drawing editor editor attributekey attribute key key value icon icon { this editor key value icon } attributeaction attribute action drawingeditor drawing editor editor attributekey attribute key key value name { this editor key value name } attributeaction attribute action drawingeditor drawing editor editor attributekey attribute key key value name icon icon { this editor key value name icon } attributeaction attribute action drawingeditor drawing editor editor attributekey attribute key key value name icon icon action compatibletextaction compatible text action { super editor this attributes = new hashmap<attributekey hash map< attribute key object> attributes put key value putvalue put value abstractaction action name n a m e name putvalue put value abstractaction action SMALL_ICON icon setenabled set enabled } attributeaction attribute action drawingeditor drawing editor editor map<attributekey map< attribute key object> attributes name icon icon { super editor this attributes = attributes putvalue put value abstractaction action name n a m e name putvalue put value abstractaction action SMALL_ICON icon setenabled set enabled } actionperformed action performed awt event actionevent action event evt { if getview get view != getview get view getselectioncount get selection count > 0 { compositeedit composite edit edit = new compositeedit composite edit labels getstring get drawattributechange draw attribute change fireundoableedithappened fire undoable edit happened edit changeattributes change attributes fireundoableedithappened fire undoable edit happened edit } } changeattributes change attributes { drawing drawing = getdrawing get drawing for map entry<attributekey entry< attribute key object> entry attributes entryset entry set { attributekey attribute key key = entry getkey get key value = entry getvalue get value iterator i = getview get view getselectedfigures get selected figures iterator while i hasnext has next { figure figure = figure i next figure setattribute set attribute key value } geteditor get editor setdefaultattribute set default attribute key value } } } 