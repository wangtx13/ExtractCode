org jhotdraw draw import com sun tools javac jvm gen import org jhotdraw util * import awt * import awt geom * import org jhotdraw draw attributekeys attribute keys * import org jhotdraw geom * chopellipseconnector chop ellipse connector chopboxconnector chop box connector { chopellipseconnector chop ellipse connector { } chopellipseconnector chop ellipse connector figure owner { super owner } private color getstrokecolor get stroke color figure f { color f getattribute get attribute STROKE_COLOR } private float getstrokewidth get stroke width figure f { float w = float f getattribute get attribute STROKE_WIDTH w == ? 1f w floatvalue float value } point2d point2 d chop figure target point2d point2 d from { target = getconnectortarget get connector target target rectangle2d rectangle2 d r = target getbounds get bounds if getstrokecolor get stroke color target != { grow switch STROKE_PLACEMENT get target { case center c e n t e r default grow = getstroketotalwidth get stroke total width target / 2d break case outside o u t sid e grow = getstroketotalwidth get stroke total width target break case inside i n sid e grow = 0f break } geom grow r grow grow } angle = geom pointtoangle point to angle r from geom ovalangletopoint oval angle to point r angle } } 