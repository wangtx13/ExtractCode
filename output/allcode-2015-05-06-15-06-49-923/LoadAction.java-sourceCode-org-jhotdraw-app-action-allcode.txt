org jhotdraw app action import org jhotdraw util * import org jhotdraw gui * import org jhotdraw gui event * import awt * import awt event * import javax swing * import io * import org jhotdraw app application import org jhotdraw app project loadaction load action savebeforeaction save before action { = load loadaction load action application app { super app resourcebundleutil resource bundle util labels = resourcebundleutil resource bundle util getlafbundle get l a f bundle org jhotdraw app labels labels configureaction configure action this open } doit do it project project { jfilechooser j chooser filechooser chooser = project getopenchooser get open chooser if filechooser chooser showopendialog show open dialog project getcomponent get component == jfilechooser j chooser APPROVE_OPTION { openfile open project filechooser chooser } else { project setenabled set enabled } } openfile open project project jfilechooser j chooser filechooser chooser { = filechooser chooser getselectedfile get selected project execute new worker { construct { try { project read } catch ioexception i o e { e } } finished value { fileopened opened project value } } } fileopened opened project project value { if value == { project setfile set project setenabled set enabled getapplication get application addrecentfile add recent } else { jsheet j sheet showmessagesheet show message sheet project getcomponent get component <html> +uimanager + u i manager getstring get optionpane option pane css + <b>couldn't <b> couldn't open the \ +file+ \ </b><br> + value joptionpane j option pane ERROR_MESSAGE new sheetlistener sheet listener { optionselected option selected sheetevent sheet event evt { project clear project setenabled set enabled } } } } } 