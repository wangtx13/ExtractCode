org jhotdraw app action import awt * import awt event * import javax swing * import javax swing text * import beans * import util * import org jhotdraw util * import org jhotdraw app application import org jhotdraw app project redoaction redo action abstractprojectaction project action { = redo private resourcebundleutil resource bundle util labels = resourcebundleutil resource bundle util getlafbundle get l a f bundle org jhotdraw app labels private propertychangelistener property change listener redoactionpropertylistener redo action property listener = new propertychangelistener property change listener { propertychange property change propertychangeevent property change event evt { name = evt getpropertyname get property name if name == abstractaction action name n a m e { putvalue put value abstractaction action name n a m e evt getnewvalue get new value } else if name == enabled { updateenabledstate update enabled state } } } redoaction redo action application app { super app labels configureaction configure action this } updateenabledstate update enabled state { isenabled is enabled = action realredoaction real redo action = getrealredoaction get real redo action if realredoaction real redo action != { isenabled is enabled = realredoaction real redo action isenabled is enabled } setenabled set enabled isenabled is enabled } @override @ override updateproject update project project oldvalue old value project newvalue new value { super updateproject update project oldvalue old value newvalue new value if newvalue new value != { putvalue put value abstractaction action name n a m e newvalue new value getaction get action redo getvalue get value abstractaction action name n a m e updateenabledstate update enabled state } } @override @ override installprojectlisteners install project listeners project p { super installprojectlisteners install project listeners p p getaction get action redo addpropertychangelistener add property change listener redoactionpropertylistener redo action property listener } @override @ override uninstallprojectlisteners uninstall project listeners project p { super uninstallprojectlisteners uninstall project listeners p p getaction get action redo removepropertychangelistener remove property change listener redoactionpropertylistener redo action property listener } actionperformed action performed actionevent action event e { action realredoaction real redo action = getrealredoaction get real redo action if realredoaction real redo action != { realredoaction real redo action actionperformed action performed e } } private action getrealredoaction get real redo action { getcurrentproject get current project == ? getcurrentproject get current project getaction get action redo } } 