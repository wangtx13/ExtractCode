org jhotdraw draw import awt * import awt geom * import util * movehandle move handle locatorhandle locator handle { private point2d point2 d oldpoint old point private geometry movehandle move handle figure owner locator locator { super owner locator } addmovehandles add move handles figure f collection<handle> collection< handle> handles { handles add southeast south east f handles add southwest south west f handles add northeast north east f handles add northwest north west f } draw graphics2d graphics2 d g { drawrectangle draw rectangle g color white color black } trackstart track start point anchor modifiersex modifiers ex { oldpoint old point = view getconstrainer get constrainer constrainpoint constrain point view viewtodrawing view to drawing anchor } trackstep track step point anchor point modifiersex modifiers ex { figure f = getowner get owner point2d point2 d newpoint new point = view getconstrainer get constrainer constrainpoint constrain point view viewtodrawing view to drawing affinetransform affine transform tx = new affinetransform affine transform tx translate newpoint new point x oldpoint old point x newpoint new point y oldpoint old point y f willchange will change f basictransform basic transform tx f changed oldpoint old point = newpoint new point } trackend track end point anchor point modifiersex modifiers ex { affinetransform affine transform tx = new affinetransform affine transform tx translate x anchor x y anchor y fireundoableedithappened fire undoable edit happened new transformedit transform edit getowner get owner tx } handle south figure owner { new movehandle move handle owner relativelocator relative locator south } handle southeast south east figure owner { new movehandle move handle owner relativelocator relative locator southeast south east } handle southwest south west figure owner { new movehandle move handle owner relativelocator relative locator southwest south west } handle north figure owner { new movehandle move handle owner relativelocator relative locator north } handle northeast north east figure owner { new movehandle move handle owner relativelocator relative locator northeast north east } handle northwest north west figure owner { new movehandle move handle owner relativelocator relative locator northwest north west } handle east figure owner { new movehandle move handle owner relativelocator relative locator east } handle west figure owner { new movehandle move handle owner relativelocator relative locator west } } 