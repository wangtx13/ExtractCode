org jhotdraw draw import org jhotdraw util * import awt * import awt geom * import util * import org jhotdraw geom * import org jhotdraw draw attributekeys attribute keys * horizontallayouter horizontal layouter abstractlayouter layouter { rectangle2d rectangle2 d calculatelayout calculate layout compositefigure composite figure compositefigure composite figure point2d point2 d anchor point2d point2 d { insets2ddouble insets2 d layoutinsets layout insets = LAYOUT_INSETS get compositefigure composite figure rectangle2d rectangle2 d layoutbounds layout bounds = new rectangle2d rectangle2 d anchor x anchor y 0 0 for figure child compositefigure composite figure getchildren get children { if child isvisible is visible { dimension2ddouble dimension2 d preferredsize preferred size = child getpreferredsize get preferred size insets2ddouble insets2 d ins = getinsets get insets child layoutbounds layout bounds height = math max layoutbounds layout bounds height preferredsize preferred size height + ins top + ins bottom layoutbounds layout bounds width += preferredsize preferred size width + ins left + ins right } } layoutbounds layout bounds width += layoutinsets layout insets left + layoutinsets layout insets right layoutbounds layout bounds height += layoutinsets layout insets top + layoutinsets layout insets bottom layoutbounds layout bounds } rectangle2d rectangle2 d layout compositefigure composite figure compositefigure composite figure point2d point2 d anchor point2d point2 d { insets2ddouble insets2 d layoutinsets layout insets = LAYOUT_INSETS get compositefigure composite figure rectangle2d rectangle2 d layoutbounds layout bounds = calculatelayout calculate layout compositefigure composite figure anchor x = layoutbounds layout bounds x + layoutinsets layout insets left for figure child compositefigure composite figure getchildren get children { if child isvisible is visible { insets2ddouble insets2 d insets = getinsets get insets child width = child getpreferredsize get preferred size width child basicsetbounds basic set bounds new point2d point2 d x + insets left layoutbounds layout bounds y + layoutinsets layout insets top + insets top new point2d point2 d x + insets left + width layoutbounds layout bounds y + layoutbounds layout bounds height layoutinsets layout insets bottom insets bottom x += width + insets left + insets right } } layoutbounds layout bounds } } 