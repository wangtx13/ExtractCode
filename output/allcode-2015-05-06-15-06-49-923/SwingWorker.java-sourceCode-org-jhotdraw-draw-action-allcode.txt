org jhotdraw draw action import javax swing swingutilities swing utilities swingworker swing worker { 	private value 	private thread thread 	 	private threadvar thread var { 		private thread thread 		threadvar 		 thread var thread t { thread = t } 		synchronized thread get { thread } 		synchronized clear { thread = } 	} 	private threadvar thread var threadvar thread var 	 	public swingworker swing worker { 		final runnable dofinished do finished = new runnable { 		 run { finished } 		} 		runnable 		 runnable doconstruct do construct = new runnable { 			public run { 				try { 					setvalue 					set value construct 				} 				finally { 					threadvar 					thread var clear 				} 				swingutilities 				 swing utilities invokelater later dofinished do finished 			} 		} 		thread 		 thread t = new thread doconstruct do construct swingworker swing worker 		threadvar 		thread var = new threadvar thread var t 	} 	 	public construct 	 	public finished { 	} 	 	public get { 		while { 			thread 			 thread t = threadvar thread var get 			if t == { 				return getvalue get value 			} 			try { 				t join 			} 			catch interruptedexception interrupted e { 				thread 				 thread currentthread current thread interrupt 				return 			} 		} 	} 	 	protected synchronized getvalue get value { 		return value 	} 	 	public interrupt { 		thread 		 thread t = threadvar thread var get 		if t != { 			t interrupt 		} 		threadvar 		thread var clear 	} 	 	private synchronized setvalue set value x { 		value = x 	} 	 	public start { 		thread 		 thread t = threadvar thread var get 		if t != { 			t start 		} 	} } 