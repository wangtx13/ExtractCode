org jhotdraw samples net figures import awt * import awt geom * import util * import org jhotdraw draw * import org jhotdraw geom * import org jhotdraw draw attributekeys attribute keys * import org jhotdraw util * nodefigure node figure textfigure text figure { private linkedlist<abstractconnector> linked list< connector> connectors private locatorconnector locator connector north private locatorconnector locator connector south private locatorconnector locator connector east private locatorconnector locator connector west nodefigure node figure { rectanglefigure rectangle figure rf = new rectanglefigure rectangle figure setdecorator set decorator rf createconnectors create connectors setdrawdecoratorfirst set draw decorator first DECORATOR_INSETS set this new insets2ddouble insets2 d 6 10 6 10 resourcebundleutil resource bundle util labels = resourcebundleutil resource bundle util getlafbundle get l a f bundle org jhotdraw samples net labels settext set text labels getstring get nodedefaultname node default name } private createconnectors create connectors { connectors = new linkedlist<abstractconnector> linked list< connector> connectors add new locatorconnector locator connector this new relativelocator relative locator 0 5 0 connectors add new locatorconnector locator connector this new relativelocator relative locator 0 5 1 connectors add new locatorconnector locator connector this new relativelocator relative locator 1 0 5 connectors add new locatorconnector locator connector this new relativelocator relative locator 0 0 5 for abstractconnector connector c connectors { c setvisible set visible } } @override @ override collection<handle> collection< handle> createhandles create handles detaillevel detail level { util list<handle> list< handle> handles = new linkedlist<handle> linked list< handle> if detaillevel detail level == 0 { handles add new movehandle move handle this relativelocator relative locator northwest north west handles add new movehandle move handle this relativelocator relative locator northeast north east handles add new movehandle move handle this relativelocator relative locator southwest south west handles add new movehandle move handle this relativelocator relative locator southeast south east handles add new connectionhandle connection handle this relativelocator relative locator north new lineconnectionfigure line connection figure handles add new connectionhandle connection handle this relativelocator relative locator east new lineconnectionfigure line connection figure handles add new connectionhandle connection handle this relativelocator relative locator south new lineconnectionfigure line connection figure handles add new connectionhandle connection handle this relativelocator relative locator west new lineconnectionfigure line connection figure } handles } @override @ override rectangle2d rectangle2 d getfiguredrawbounds get figure draw bounds { rectangle2d rectangle2 d b = super getfiguredrawbounds get figure draw bounds geom grow b 10d 10d b } @override @ override connector findconnector find connector point2d point2 d p connectionfigure connection figure figure { min = MAX_VALUE connector closest = for connector c connectors { point2d point2 d p2 = geom center c getbounds get bounds d = geom length2 p x p y p2 x p2 y if d < min { min = d closest = c } } closest } @override @ override connector findcompatibleconnector find compatible connector connector c isstart is start { connectors getfirst get first } nodefigure node figure clone { nodefigure node figure that = nodefigure node figure super clone that createconnectors create connectors that } @override @ override drawconnectors draw connectors graphics2d graphics2 d g { for connector c connectors { c draw g } } @override @ override getlayer get layer { 1 } setattribute set attribute attributekey attribute key key newvalue new value { super setattribute set attribute key newvalue new value if getdecorator get decorator != { getdecorator get decorator setattribute set attribute key newvalue new value } } } 