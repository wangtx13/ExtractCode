net n3 nanoxml import io printstream print stream import io printwriter print writer xmlexception xml { private msg private systemid private linenr line nr private encapsulatedexception encapsulated xmlexception xml msg { this 1 msg } xmlexception xml e { this 1 e nested } xmlexception xml systemid linenr line nr e { this systemid linenr line nr e nested } xmlexception xml systemid linenr line nr msg { this systemid linenr line nr msg } xmlexception xml systemid linenr line nr e msg reportparams report params { super xmlexception xml buildmessage build message systemid linenr line nr e msg reportparams report params this systemid = systemid this linenr line nr = linenr line nr this encapsulatedexception encapsulated = e this msg = xmlexception xml buildmessage build message systemid linenr line nr e msg reportparams report params } private buildmessage build message systemid linenr line nr e msg reportparams report params { str = msg if reportparams report params { if systemid != { str += systemid=' + systemid + ' } if linenr line nr >= 0 { str += line= + linenr line nr } if e != { str += + e } } str } finalize throwable { this systemid = this encapsulatedexception encapsulated = super finalize } getsystemid get systemid { this systemid } getlinenr get line nr { this linenr line nr } getexception get { this encapsulatedexception encapsulated } printstacktrace print stack trace printwriter print writer writer { super printstacktrace print stack trace writer if this encapsulatedexception encapsulated != { writer *** nested this encapsulatedexception encapsulated printstacktrace print stack trace writer } } printstacktrace print stack trace printstream print stream stream { super printstacktrace print stack trace stream if this encapsulatedexception encapsulated != { stream *** nested this encapsulatedexception encapsulated printstacktrace print stack trace stream } } printstacktrace print stack trace { super printstacktrace print stack trace if this encapsulatedexception encapsulated != { err *** nested this encapsulatedexception encapsulated printstacktrace print stack trace } } tostring to { this msg } } 