org jhotdraw app action import org jhotdraw util * import awt event * import javax swing * import util * import beans * toggletoolbaraction toggle tool bar action abstractaction action { private jtoolbar j tool bar toolbar tool bar private propertychangelistener property change listener propertyhandler property handler toggletoolbaraction toggle tool bar action jtoolbar j tool bar toolbar tool bar label { super label propertyhandler property handler = new propertychangelistener property change listener { propertychange property change propertychangeevent property change event evt { name = evt getpropertyname get property name if name equals visible { putvalue put value actions SELECTED_KEY evt getnewvalue get new value } } } putvalue put value actions SELECTED_KEY settoolbar set tool bar toolbar tool bar } putvalue put value key newvalue new value { super putvalue put value key newvalue new value if key == actions SELECTED_KEY { if toolbar tool bar != { toolbar tool bar setvisible set visible newvalue new value } } } settoolbar set tool bar jtoolbar j tool bar newvalue new value { if toolbar tool bar != { toolbar tool bar removepropertychangelistener remove property change listener propertyhandler property handler } toolbar tool bar = newvalue new value if toolbar tool bar != { toolbar tool bar addpropertychangelistener add property change listener propertyhandler property handler putvalue put value actions SELECTED_KEY toolbar tool bar isvisible is visible } } actionperformed action performed actionevent action event e { if toolbar tool bar != { putvalue put value actions SELECTED_KEY ! toolbar tool bar isvisible is visible } } } 