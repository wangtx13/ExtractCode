org jhotdraw samples svg import io ioexception i o import org jhotdraw draw * import org jhotdraw samples svg figures * import org jhotdraw xml * svgdrawing s v g drawing defaultdrawing default drawing { private title private description svgdrawing s v g drawing { } settitle set title newvalue new value { oldvalue old value = title title = newvalue new value firepropertychange fire property change title oldvalue old value newvalue new value } gettitle get title { title } setdescription set description newvalue new value { oldvalue old value = description description = newvalue new value firepropertychange fire property change description oldvalue old value newvalue new value } getdescription get description { description } read dominput dom input in ioexception i o { for i=0 n = in getelementcount get element count i < n i++ { in openelement open element i name = in gettagname get tag name if name equals title { title = in gettext get text in closeelement close element } else if name equals desc { description = in gettext get text in closeelement close element } else if name equals defs { in closeelement close element } else if name equals use { in closeelement close element } else if name equals script { in closeelement close element } else if name equals style { in closeelement close element } else if name equals radialgradient radial gradient { in closeelement close element } else { in closeelement close element f = in readobject read i if f instanceof svgdrawing s v g drawing { svggroup s v g group g = new svggroup s v g group g willchange will change for figure child svgdrawing s v g drawing f getfigures get figures { g basicadd basic add child } g changed if ! g isempty is empty { add g } } else if f instanceof svgfigure s v g figure { if ! svgfigure s v g figure f isempty is empty { add figure f } } else { throw new ioexception i o unexpected child +f } } } readattributes read attributes in } readattributes read attributes dominput dom input in ioexception i o { } @override @ override write domoutput dom output out ioexception i o { out addattribute add attribute xmlns http out addattribute add attribute 1 2 out addattribute add attribute baseprofile base profile tiny for figure f getfigures get figures { out writeobject write f } } } 