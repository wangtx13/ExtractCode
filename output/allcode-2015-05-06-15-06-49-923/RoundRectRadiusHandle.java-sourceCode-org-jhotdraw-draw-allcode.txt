org jhotdraw draw import org jhotdraw geom geom import org jhotdraw util * import org jhotdraw undo * import awt * import awt geom * roundrectradiushandle round rect radius handle abstracthandle handle { private offset o f f s e t = 6 private point originalarc original arc compositeedit composite edit edit roundrectradiushandle round rect radius handle figure owner { super owner } draw graphics2d graphics2 d g { drawdiamond draw diamond g color yellow color black } rectangle basicgetbounds basic get bounds { rectangle r = new rectangle locate r grow gethandlesize get handlesize / 2 + 1 gethandlesize get handlesize / 2 + 1 r } private point locate { roundrectanglefigure round rectangle figure owner = roundrectanglefigure round rectangle figure getowner get owner rectangle r = view drawingtoview drawing to view owner getbounds get bounds point arc = view drawingtoview drawing to view new point2d point2 d owner getarcwidth get arc width owner getarcheight get arc height new point r x+arc x/2+offset x/2+ o f f s e t r y+arc y/2+offset y/2+ o f f s e t } trackstart track start point anchor modifiersex modifiers ex { view getdrawing get drawing fireundoableedithappened fire undoable edit happened edit = new compositeedit composite edit mehrfachaenderung roundrectanglefigure round rectangle figure owner = roundrectanglefigure round rectangle figure getowner get owner originalarc original arc = view drawingtoview drawing to view new point2d point2 d owner getarcwidth get arc width owner getarcheight get arc height } trackstep track step point anchor point modifiersex modifiers ex { dx = x anchor x dy = y anchor y roundrectanglefigure round rectangle figure owner = roundrectanglefigure round rectangle figure getowner get owner rectangle r = view drawingtoview drawing to view owner getbounds get bounds point viewarc view arc = new point geom range 0 r width 2* originalarc original arc x/2 + dx geom range 0 r height 2* originalarc original arc y/2 + dy point2d point2 d arc = view viewtodrawing view to drawing viewarc view arc owner setarc set arc arc x arc y } trackend track end point anchor point modifiersex modifiers ex { view getdrawing get drawing fireundoableedithappened fire undoable edit happened edit } } 