org jhotdraw draw action import javax swing * import util * import awt * import beans * import javax swing * import org jhotdraw draw * colorchooseraction color chooser action abstractselectedaction selected action { private attributekey attribute key key private jcolorchooser j color chooser colorchooser color chooser colorchooseraction color chooser action drawingeditor drawing editor editor attributekey attribute key key { this editor key } colorchooseraction color chooser action drawingeditor drawing editor editor attributekey attribute key key icon icon { this editor key icon } colorchooseraction color chooser action drawingeditor drawing editor editor attributekey attribute key key name { this editor key name } colorchooseraction color chooser action drawingeditor drawing editor editor attributekey attribute key key name icon icon { super editor this key = key putvalue put value abstractaction action name n a m e name putvalue put value abstractaction action SMALL_ICON icon setenabled set enabled } actionperformed action performed awt event actionevent action event e { if colorchooser color chooser == { colorchooser color chooser = new jcolorchooser j color chooser } color initialcolor initial color = color geteditor get editor getdefaultattribute get default attribute key if initialcolor initial color == { initialcolor initial color = color red } color chosencolor chosen color = colorchooser color chooser showdialog show dialog component e getsource get source labels getstring get drawcolor draw color initialcolor initial color if chosencolor chosen color != { changeattribute change attribute chosencolor chosen color } } changeattribute change attribute color value { drawing drawing = getdrawing get drawing iterator i = getview get view getselectedfigures get selected figures iterator while i hasnext has next { figure figure = figure i next figure setattribute set attribute key value } geteditor get editor setdefaultattribute set default attribute key value } selectionchanged selection changed figureselectionevent figure selection event evt { } } 