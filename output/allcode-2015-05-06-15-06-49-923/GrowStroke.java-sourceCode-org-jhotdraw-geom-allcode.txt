org jhotdraw geom import awt * import awt geom * import awt font * growstroke grow stroke doublestroke stroke { private float grow growstroke grow stroke float grow float miterlimit miter limit { super grow * 2 1f basicstroke basic stroke CAP_SQUARE basicstroke basic stroke JOIN_BEVEL miterlimit miter limit 0f this grow = grow } shape createstrokedshape create stroked shape shape s { bezierpath bezier path bp = new bezierpath bezier path generalpath general path left = new generalpath general path generalpath general path right = new generalpath general path coords = new 6 for pathiterator path iterator i = s getpathiterator get path iterator 0 1d ! i isdone is done i next { type = i currentsegment current segment coords switch type { case pathiterator path iterator SEG_MOVETO if bp size != 0 { tracestroke trace stroke bp left right } bp clear bp moveto move to coords 0 coords 1 break case pathiterator path iterator SEG_LINETO if coords 0 != bp get bp size 1 x 0 || coords 1 != bp get bp size 1 y 0 { bp lineto line to coords 0 coords 1 } break case pathiterator path iterator SEG_QUADTO bp quadto quad to coords 0 coords 1 coords 2 coords 3 break case pathiterator path iterator SEG_CUBICTO bp curveto curve to coords 0 coords 1 coords 2 coords 3 coords 4 coords 5 break case pathiterator path iterator SEG_CLOSE bp setclosed set closed break } } if bp size > 1 { tracestroke trace stroke bp left right } if left getbounds2d get bounds2 d contains right getbounds2d get bounds2 d { grow > 0 ? left right } else { grow > 0 ? right left } } } 