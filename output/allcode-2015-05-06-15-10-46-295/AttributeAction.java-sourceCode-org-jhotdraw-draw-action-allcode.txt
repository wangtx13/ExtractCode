org jhotdraw draw action import org jhotdraw undo * import javax swing * import javax swing text * import util * import awt * import org jhotdraw draw * import org jhotdraw geom * attribute action selected action { map< attribute key object> attributes attribute action drawing editor editor attribute key key value { this editor key value } attribute action drawing editor editor attribute key key value icon icon { this editor key value icon } attribute action drawing editor editor attribute key key value name { this editor key value name } attribute action drawing editor editor attribute key key value name icon icon { this editor key value name icon } attribute action drawing editor editor attribute key key value name icon icon action compatible text action { super editor this attributes = new hash map< attribute key object> attributes put key value put value action n a m e name put value action SMALL_ICON icon set enabled } attribute action drawing editor editor map< attribute key object> attributes name icon icon { super editor this attributes = attributes put value action n a m e name put value action SMALL_ICON icon set enabled } action performed awt event action event evt { if get view != get view get selection count > 0 { composite edit edit = new composite edit labels get draw attribute change fire undoable edit happened edit change attributes fire undoable edit happened edit } } change attributes { drawing drawing = get drawing for map entry< attribute key object> entry attributes entry set { attribute key key = entry get key value = entry get value iterator i = get view get selected figures iterator while i has next { figure figure = figure i next figure set attribute key value } get editor set default attribute key value } } } 