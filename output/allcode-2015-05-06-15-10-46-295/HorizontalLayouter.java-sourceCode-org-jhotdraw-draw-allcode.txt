org jhotdraw draw import org jhotdraw util * import awt * import awt geom * import util * import org jhotdraw geom * import org jhotdraw draw attribute keys * horizontal layouter layouter { rectangle2 d calculate layout composite figure composite figure point2 d anchor point2 d { insets2 d layout insets = LAYOUT_INSETS get composite figure rectangle2 d layout bounds = new rectangle2 d anchor x anchor y 0 0 for figure child composite figure get children { if child is visible { dimension2 d preferred size = child get preferred size insets2 d ins = get insets child layout bounds height = math max layout bounds height preferred size height + ins top + ins bottom layout bounds width += preferred size width + ins left + ins right } } layout bounds width += layout insets left + layout insets right layout bounds height += layout insets top + layout insets bottom layout bounds } rectangle2 d layout composite figure composite figure point2 d anchor point2 d { insets2 d layout insets = LAYOUT_INSETS get composite figure rectangle2 d layout bounds = calculate layout composite figure anchor x = layout bounds x + layout insets left for figure child composite figure get children { if child is visible { insets2 d insets = get insets child width = child get preferred size width child basic set bounds new point2 d x + insets left layout bounds y + layout insets top + insets top new point2 d x + insets left + width layout bounds y + layout bounds height layout insets bottom insets bottom x += width + insets left + insets right } } layout bounds } } 