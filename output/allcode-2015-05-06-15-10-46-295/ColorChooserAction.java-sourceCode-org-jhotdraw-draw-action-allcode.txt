org jhotdraw draw action import javax swing * import util * import awt * import beans * import javax swing * import org jhotdraw draw * color chooser action selected action { private attribute key key private j color chooser color chooser color chooser action drawing editor editor attribute key key { this editor key } color chooser action drawing editor editor attribute key key icon icon { this editor key icon } color chooser action drawing editor editor attribute key key name { this editor key name } color chooser action drawing editor editor attribute key key name icon icon { super editor this key = key put value action n a m e name put value action SMALL_ICON icon set enabled } action performed awt event action event e { if color chooser == { color chooser = new j color chooser } color initial color = color get editor get default attribute key if initial color == { initial color = color red } color chosen color = color chooser show dialog component e get source labels get draw color initial color if chosen color != { change attribute chosen color } } change attribute color value { drawing drawing = get drawing iterator i = get view get selected figures iterator while i has next { figure figure = figure i next figure set attribute key value } get editor set default attribute key value } selection changed figure selection event evt { } } 