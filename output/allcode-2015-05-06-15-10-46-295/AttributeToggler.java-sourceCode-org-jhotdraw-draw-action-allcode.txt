org jhotdraw draw action import awt * import awt event * import javax swing * import javax swing text * import javax swing event * import util * import org jhotdraw draw * attribute toggler implements action listener { private drawing editor editor private attribute key key private value1 private value2 private action compatible text action attribute toggler drawing editor editor attribute key key value1 value2 { this editor key value1 value2 } attribute toggler drawing editor editor attribute key key value1 value2 action compatible text action { this editor = editor this key = key this value1 = value1 this value2 = value2 this compatible text action = compatible text action } drawing view get view { editor get view } drawing editor get editor { editor } action performed action event evt { if compatible text action != { component focus owner = keyboard focus manager get current keyboard focus manager get permanent focus owner if focus owner != focus owner instanceof j text component { compatible text action action performed evt } } iterator i = get view get selected figures iterator new value = if i has next { figure f = figure i next attr = f get attribute key if value1 == attr == || value1 != attr != attr equals value1 { new value = value2 } else { new value = value1 } get editor set default attribute key new value f set attribute key new value } while i has next { figure f = figure i next f set attribute key new value } } } 