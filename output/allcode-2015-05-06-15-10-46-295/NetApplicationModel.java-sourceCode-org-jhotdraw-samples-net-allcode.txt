org jhotdraw samples net import awt * import awt event * import util * import javax swing * import org jhotdraw app * import org jhotdraw app action * import org jhotdraw draw * import org jhotdraw draw action * import org jhotdraw samples net figures * import org jhotdraw util * net application model default application model { private scale factors = {5 4 3 2 1 5 1 25 1 0 75 0 5 0 25 0 10} private tool button listener implements item listener { private tool tool private drawing editor editor tool button listener tool t drawing editor editor { this tool = t this editor = editor } item state changed item event evt { if evt get state change == item event s e l e c t e d { editor set tool tool } } } private default drawing editor shared editor private hash map< action> actions net application model { } init application application a { resource bundle util draw labels = resource bundle util get l a f bundle org jhotdraw draw labels resource bundle util labels = resource bundle util get l a f bundle org jhotdraw samples net labels action aa put action export action new export action a put action toggle grid aa = new toggle project property action a grid visible draw labels configure action aa align grid for sf scale factors { put action sf*100 + % aa = new project property action a scale factor t y p e new sf aa put value action n a m e sf*100 + % } } default drawing editor get shared editor { if shared editor == { shared editor = new default drawing editor } shared editor } init project application a project p { if a is sharing tools among projects { net project p set drawing editor get shared editor } } private add creation buttons to j tool bar tb drawing editor editor { hash map< attribute key object> attributes resource bundle util labels = resource bundle util get l a f bundle org jhotdraw samples net labels resource bundle util draw labels = resource bundle util get l a f bundle org jhotdraw draw labels tool bar button factory add selection tool to tb editor tb add separator attributes = new hash map< attribute key object> attributes put attribute keys FILL_COLOR color white attributes put attribute keys STROKE_COLOR color black attributes put attribute keys TEXT_COLOR color black tool bar button factory add tool to tb editor new text tool new node figure attributes create node labels attributes = new hash map< attribute key object> attributes put attribute keys STROKE_COLOR new color 0x000099 tool bar button factory add tool to tb editor new connection tool new line connection figure attributes create link labels } util list< j tool bar> create tool bars application a project pr { resource bundle util draw labels = resource bundle util get l a f bundle org jhotdraw draw labels resource bundle util labels = resource bundle util get l a f bundle org jhotdraw samples net labels net project p = net project pr drawing editor editor if p == { editor = get shared editor } else { editor = p get drawing editor } linked list< j tool bar> list = new linked list< j tool bar> j tool bar tb tb = new j tool bar add creation buttons to tb editor tb set name draw labels get draw tool bar title list add tb tb = new j tool bar tool bar button factory add attributes buttons to tb editor tb set name draw labels get attributes tool bar title list add tb tb = new j tool bar tool bar button factory add alignment buttons to tb editor tb set name draw labels get alignment tool bar title list add tb list } util list< j menu> create menus application a project pr { net project p = net project pr resource bundle util labels = resource bundle util get l a f bundle org jhotdraw app labels linked list< j menu> mb = new linked list< j menu> j menu m m2 j menu item mi j radio button menu item rbmi j check box menu item cbmi button group group m = new j menu labels configure menu m view cbmi = new j check box menu item get action toggle grid actions configure j check box menu item cbmi get action toggle grid m add cbmi m2 = new j menu zoom for sf scale factors { = sf*100 + % cbmi = new j check box menu item get action actions configure j check box menu item cbmi get action m2 add cbmi } m add m2 mb add m mb } } 