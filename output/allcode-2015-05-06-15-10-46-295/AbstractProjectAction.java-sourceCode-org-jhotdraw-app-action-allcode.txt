org jhotdraw app action import awt * import awt event * import beans * import javax swing * import javax swing event * import org jhotdraw app application import org jhotdraw app project project action action { private application app private property change listener application listener = new property change listener { property change property change event evt { if evt get property name == current project { update project project evt get old value project evt get new value } } } private property change listener project listener = new property change listener { property change property change event evt { if evt get property name == enabled { update enabled evt get old value evt get new value } } } project action application app { this app = app if app != { app add property change listener application listener update project app get current project } } update project project old value project new value { if old value != { uninstall project listeners old value } if new value != { install project listeners new value } fire property change project old value new value update enabled old value != old value is enabled new value != new value is enabled } install project listeners project p { p add property change listener project listener } uninstall project listeners project p { p remove property change listener project listener } update enabled old value new value { set enabled super is enabled fire property change project enabled old value new value } application get application { app } project get current project { app get current project } @ override is enabled { get current project != get current project is enabled || super is enabled } @ override set enabled new value { old value = this enabled this enabled = new value proj is enabled = get current project != get current project is enabled fire property change enabled value of old value proj is enabled value of new value proj is enabled } } 