org jhotdraw samples draw import org jhotdraw draw * import org jhotdraw draw action * import org jhotdraw util * import awt * import awt geom * import awt event * import io * import net * import util * import javax swing * import javax swing event * import org jhotdraw xml * draw applet j applet { private v e r s i o n = 0 5 private n a m e = jhotdraw plasma draw private drawing panel drawing panel get parameter name { try { super get parameter name } catch pointer e { } } init { try { u i manager set look and feel u i manager get look and feel name } catch throwable e { } container c = get content pane c set layout new box layout c box layout Y_AXIS labels = get applet info split \n for i=0 i < labels length i++ { c add new j label labels i length == 0 ? labels i } new swing worker { construct { result try { out get parameter datafile +get parameter datafile if get parameter data != { nano xml lite dom input domi = new nano xml lite dom input new draw figure factory new reader get parameter data domi open element plasma draw result = domi read 0 } else if get parameter datafile != { input stream in = try { u r l url = new u r l get document base get parameter datafile in = url open connection get input stream nano xml lite dom input domi = new nano xml lite dom input new draw figure factory in domi open element plasma draw result = domi read 0 } finally { if in != in close } } else { result = } } catch throwable t { result = t } result } finished { if get value instanceof throwable { throwable get value print stack trace } container c = get content pane c set layout new border layout c remove all c add drawing panel = new drawing panel result = get value init components if result != { if result instanceof drawing { set drawing drawing result } else if result instanceof throwable { get drawing add new text figure result to throwable result print stack trace } } c validate } } start } private set drawing drawing d { drawing panel set drawing d } private drawing get drawing { drawing panel get drawing } set data text { if text != text length > 0 { reader in = new reader text try { nano xml lite dom input domi = new nano xml lite dom input new draw figure factory in domi open element plasma draw set drawing drawing domi read 0 } catch throwable e { get drawing clear text figure tf = new text figure tf set text e get message tf set bounds new point2 d 10 10 new point2 d 100 100 get drawing add tf e print stack trace } finally { if in != in close } } } get data { char writer out = new char writer try { nano xml lite dom output domo = new nano xml lite dom output new draw figure factory domo open element plasma draw domo write get drawing domo close element domo save out } catch i o e { text figure tf = new text figure tf set text e get message tf set bounds new point2 d 10 10 new point2 d 100 100 get drawing add tf e print stack trace } finally { if out != out close } out to } get parameter info { new { { data the data to be displayed by this applet } { datafile u r l an u r l to a containing the data to be displayed by this applet } } } get applet info { n a m e+ \n + v e r s i o n + \n\n copyright \u00a9 2004 2006 \u00a9 werner randelshofer + \n alle rights reserved + \n\n this software is based on + \n jhotdraw \u00a9 1996 1997 i f a informatik und erich gamma + \n nano xml \u00a9 2000 2002 marc de scheemaecker + \n + \n script can access the drawing data using the set data and get data } private init components { tool button group = new javax swing button group } args { swing utilities later new runnable { run { j frame f = new j frame jhotdraw plasma draw applet f set default close operation j frame EXIT_ON_CLOSE draw applet a = new draw applet f get content pane add a a init f set size 500 400 f set visible a start } } } private javax swing button group tool button group } 