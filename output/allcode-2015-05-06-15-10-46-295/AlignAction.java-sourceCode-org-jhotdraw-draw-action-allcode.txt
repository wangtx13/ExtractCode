org jhotdraw draw action import org jhotdraw draw drawing editor import org jhotdraw draw figure import org jhotdraw draw figure selection event import org jhotdraw draw transform edit import org jhotdraw undo composite edit import javax swing * import awt * import awt geom * import util * import javax swing undo * align action selected action { align action drawing editor editor { super editor } update enabled state { if get view != { set enabled get view is enabled get view get selection count > 1 } else { set enabled } } action performed awt event action event e { composite edit edit = new composite edit labels get align fire undoable edit happened edit align figures get view get selected figures get selection bounds fire undoable edit happened edit } align figures collection selected figures rectangle2 d selection bounds rectangle2 d get selection bounds { rectangle2 d bounds = for iterator i=get view get selected figures iterator i has next { figure f = figure i next if bounds == { bounds = f get bounds } else { bounds add f get bounds } } bounds } north align action { north drawing editor editor { super editor labels configure action this align north } align figures collection selected figures rectangle2 d selection bounds { y = selection bounds y for iterator i=get view get selected figures iterator i has next { figure f = figure i next f will change rectangle2 d b = f get bounds affine transform tx = new affine transform tx translate 0 y b y f basic transform tx f changed fire undoable edit happened new transform edit f tx } } } east align action { east drawing editor editor { super editor labels configure action this align east } align figures collection selected figures rectangle2 d selection bounds { x = selection bounds x + selection bounds width for iterator i=get view get selected figures iterator i has next { figure f = figure i next f will change rectangle2 d b = f get bounds affine transform tx = new affine transform tx translate x b x b width 0 f basic transform tx f changed fire undoable edit happened new transform edit f tx } } } west align action { west drawing editor editor { super editor labels configure action this align west } align figures collection selected figures rectangle2 d selection bounds { x = selection bounds x for iterator i=get view get selected figures iterator i has next { figure f = figure i next f will change rectangle2 d b = f get bounds affine transform tx = new affine transform tx translate x b x 0 f basic transform tx f changed fire undoable edit happened new transform edit f tx } } } south align action { south drawing editor editor { super editor labels configure action this align south } align figures collection selected figures rectangle2 d selection bounds { y = selection bounds y + selection bounds height for iterator i=get view get selected figures iterator i has next { figure f = figure i next f will change rectangle2 d b = f get bounds affine transform tx = new affine transform tx translate 0 y b y b height f basic transform tx f changed fire undoable edit happened new transform edit f tx } } } vertical align action { vertical drawing editor editor { super editor labels configure action this align vertical } align figures collection selected figures rectangle2 d selection bounds { y = selection bounds y + selection bounds height / 2 for iterator i=get view get selected figures iterator i has next { figure f = figure i next f will change rectangle2 d b = f get bounds affine transform tx = new affine transform tx translate 0 y b y b height / 2 f basic transform tx f changed fire undoable edit happened new transform edit f tx } } } horizontal align action { horizontal drawing editor editor { super editor labels configure action this align horizontal } align figures collection selected figures rectangle2 d selection bounds { x = selection bounds x + selection bounds width / 2 for iterator i=get view get selected figures iterator i has next { figure f = figure i next f will change rectangle2 d b = f get bounds affine transform tx = new affine transform tx translate x b x b width / 2 0 f basic transform tx f changed fire undoable edit happened new transform edit f tx } } } } 