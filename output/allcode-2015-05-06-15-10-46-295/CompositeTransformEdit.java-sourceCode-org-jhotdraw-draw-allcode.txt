org jhotdraw draw import javax swing undo * import awt geom * composite transform edit undoable edit { private figure owner private affine transform tx in progress composite transform edit figure owner affine transform tx { this owner = owner this tx = affine transform tx clone in progress = } get presentation name { figur transformieren } add edit undoable edit an edit { if an edit == this { end } else { if ! in progress { } else { an edit die } } } replace edit undoable edit an edit { } redo cannot redo { super redo owner will change owner basic transform tx owner changed } undo cannot undo { super undo owner will change try { owner basic transform tx create inverse } catch noninvertible transform ex { ex print stack trace } owner changed } is in progress { 	return in progress } end { in progress = } can undo { !is in progress super can undo } can redo { !is in progress super can redo } } 