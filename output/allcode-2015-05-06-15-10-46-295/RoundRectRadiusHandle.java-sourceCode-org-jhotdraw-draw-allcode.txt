org jhotdraw draw import org jhotdraw geom geom import org jhotdraw util * import org jhotdraw undo * import awt * import awt geom * round rect radius handle handle { private o f f s e t = 6 private point original arc composite edit edit round rect radius handle figure owner { super owner } draw graphics2 d g { draw diamond g color yellow color black } rectangle basic get bounds { rectangle r = new rectangle locate r grow get handlesize / 2 + 1 get handlesize / 2 + 1 r } private point locate { round rectangle figure owner = round rectangle figure get owner rectangle r = view drawing to view owner get bounds point arc = view drawing to view new point2 d owner get arc width owner get arc height new point r x+arc x/2+ o f f s e t r y+arc y/2+ o f f s e t } track start point anchor modifiers ex { view get drawing fire undoable edit happened edit = new composite edit mehrfachaenderung round rectangle figure owner = round rectangle figure get owner original arc = view drawing to view new point2 d owner get arc width owner get arc height } track step point anchor point modifiers ex { dx = x anchor x dy = y anchor y round rectangle figure owner = round rectangle figure get owner rectangle r = view drawing to view owner get bounds point view arc = new point geom range 0 r width 2* original arc x/2 + dx geom range 0 r height 2* original arc y/2 + dy point2 d arc = view view to drawing view arc owner set arc arc x arc y } track end point anchor point modifiers ex { view get drawing fire undoable edit happened edit } } 