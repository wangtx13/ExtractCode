org jhotdraw draw import awt geom * import awt * import javax swing border factory import javax swing j text area import javax swing j scroll pane floating text area { j scroll pane edit scroll container j text area edit widget drawing view view floating text area { edit widget = new j text area edit widget set wrap style word edit widget set line wrap edit scroll container = new j scroll pane edit widget j scroll pane VERTICAL_SCROLLBAR_ALWAYS j scroll pane HORIZONTAL_SCROLLBAR_NEVER edit scroll container set cursor cursor get predefined cursor cursor DEFAULT_CURSOR edit scroll container set border border factory create line border color black } create overlay drawing view view { create overlay view } request focus { edit widget request focus } create overlay drawing view view text holder figure { view get container add edit scroll container 0 if figure != { font f = figure get font f = f derive font f get style float f get size * view get scale factor edit widget set font f edit widget set foreground figure get text color edit widget set background figure get fill color edit widget set tab size figure get tab size } this view = view } set bounds rectangle2 d r text { edit widget set text text edit scroll container set bounds view drawing to view r edit scroll container set visible edit widget set caret position 0 edit widget request focus } get text { edit widget get text } dimension get preferred size cols { new dimension edit widget get width edit widget get height } end overlay { view get container request focus if edit scroll container != { edit scroll container set visible view get container remove edit scroll container rectangle bounds = edit scroll container get bounds view get container repaint bounds x bounds y bounds width bounds height } } } 