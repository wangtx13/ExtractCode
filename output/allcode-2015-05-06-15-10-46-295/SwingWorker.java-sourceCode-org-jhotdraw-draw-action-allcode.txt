org jhotdraw draw action import javax swing swing utilities swing worker { 	private value 	private thread thread 	 	private thread var { 		private thread thread 		 thread var thread t { thread = t } 		synchronized thread get { thread } 		synchronized clear { thread = } 	} 	private thread var thread var 	 	public swing worker { 		final runnable do finished = new runnable { 		 run { finished } 		} 		 runnable do construct = new runnable { 			public run { 				try { 					set value construct 				} 				finally { 					thread var clear 				} 				 swing utilities later do finished 			} 		} 		 thread t = new thread do construct swing worker 		thread var = new thread var t 	} 	 	public construct 	 	public finished { 	} 	 	public get { 		while { 			 thread t = thread var get 			if t == { 				return get value 			} 			try { 				t join 			} 			catch interrupted e { 				 thread current thread interrupt 				return 			} 		} 	} 	 	protected synchronized get value { 		return value 	} 	 	public interrupt { 		 thread t = thread var get 		if t != { 			t interrupt 		} 		thread var clear 	} 	 	private synchronized set value x { 		value = x 	} 	 	public start { 		 thread t = thread var get 		if t != { 			t start 		} 	} } 