org jhotdraw app action import awt event * import beans * import org jhotdraw app application import org jhotdraw app project project property action project action { private property name private parameter private property value private setter name private getter name private property change listener project listener = new property change listener { property change property change event evt { if evt get property name == property name { update selected state } } } project property action application app property name property value { this app property name property value get property value } project property action application app property name property property value { super app this property name = property name this parameter = new { property } this property value = property value setter name = set + character to upper case property name char at 0 + property name substring 1 getter name = property == t y p e || property == ? is get + character to upper case property name char at 0 + property name substring 1 update selected state } action performed action event evt { project p = get current project try { p get get setter name parameter p new {property value} } catch throwable e { internal = new internal invocation failed init cause e throw } } install project listeners project p { super install project listeners p p add property change listener project listener update selected state } uninstall project listeners project p { super uninstall project listeners p p remove property change listener project listener } private update selected state { is selected = project p = get current project if p != { try { value = p get get getter name p is selected = value == property value || value != property value != value equals property value } catch throwable e { internal = new internal invocation failed init cause e throw } } put value actions SELECTED_KEY is selected } } 