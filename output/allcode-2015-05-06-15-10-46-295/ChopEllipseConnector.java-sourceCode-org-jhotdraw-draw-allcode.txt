org jhotdraw draw import com sun tools javac jvm gen import org jhotdraw util * import awt * import awt geom * import org jhotdraw draw attribute keys * import org jhotdraw geom * chop ellipse connector chop box connector { chop ellipse connector { } chop ellipse connector figure owner { super owner } private color get stroke color figure f { color f get attribute STROKE_COLOR } private float get stroke width figure f { float w = float f get attribute STROKE_WIDTH w == ? 1f w float value } point2 d chop figure target point2 d from { target = get connector target target rectangle2 d r = target get bounds if get stroke color target != { grow switch STROKE_PLACEMENT get target { case c e n t e r default grow = get stroke total width target / 2d break case o u t sid e grow = get stroke total width target break case i n sid e grow = 0f break } geom grow r grow grow } angle = geom point to angle r from geom oval angle to point r angle } } 