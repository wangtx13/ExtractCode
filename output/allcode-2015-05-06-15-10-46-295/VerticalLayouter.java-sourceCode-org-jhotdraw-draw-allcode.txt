org jhotdraw draw import org jhotdraw util * import awt * import awt geom * import util * import org jhotdraw geom * import org jhotdraw draw attribute keys * vertical layouter layouter { rectangle2 d calculate layout composite figure layoutable point2 d anchor point2 d { insets2 d layout insets = LAYOUT_INSETS get layoutable if layout insets == layout insets = new insets2 d 0 0 0 0 rectangle2 d layout bounds = new rectangle2 d anchor x anchor y 0 0 for figure child layoutable get children { if child is visible { dimension2 d preferred size = child get preferred size insets2 d ins = get insets child layout bounds width = math max layout bounds width preferred size width + ins left + ins right layout bounds height += preferred size height + ins top + ins bottom } } layout bounds width += layout insets left + layout insets right layout bounds height += layout insets top + layout insets bottom layout bounds } rectangle2 d layout composite figure layoutable point2 d anchor point2 d { insets2 d layout insets = LAYOUT_INSETS get layoutable if layout insets == layout insets = new insets2 d 0 0 0 0 rectangle2 d layout bounds = calculate layout layoutable anchor y = layout bounds y + layout insets top for figure child layoutable get children { if child is visible { insets2 d insets = get insets child height = child get preferred size height child basic set bounds new point2 d layout bounds x + layout insets left + insets left y + insets top new point2 d layout bounds x + layout bounds width layout insets right insets right y + insets top + height y += height + insets top + insets bottom } } layout bounds } } 