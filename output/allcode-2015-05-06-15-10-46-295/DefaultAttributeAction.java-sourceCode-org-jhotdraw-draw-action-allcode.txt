org jhotdraw draw action import org jhotdraw undo * import javax swing * import awt * import beans * import util * import org jhotdraw draw * default attribute action selected action { private attribute key keys default attribute action drawing editor editor attribute key key { this editor key } default attribute action drawing editor editor attribute key keys { this editor keys } default attribute action drawing editor editor attribute key key icon icon { this editor key icon } default attribute action drawing editor editor attribute key key name { this editor key name } default attribute action drawing editor editor attribute key key name icon icon { this editor new attribute key {key} name icon } default attribute action drawing editor editor attribute key keys name icon icon { super editor this keys = keys put value action n a m e name put value action SMALL_ICON icon set enabled editor add property change listener new property change listener { property change property change event evt { if evt get property name equals default attribute action this keys 0 { put value attribute_ + default attribute action this keys 0 evt get new value } } } } action performed awt event action event evt { if get view != get view get selection count > 0 { composite edit edit = new composite edit labels get draw attribute change fire undoable edit happened edit change attribute fire undoable edit happened edit } } change attribute { drawing drawing = get drawing iterator i = get view get selected figures iterator while i has next { figure figure = figure i next for j=0 j < keys length j++ { figure set attribute keys j get editor get default attribute keys j } } } selection changed figure selection event evt { } } 